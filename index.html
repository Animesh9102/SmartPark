<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartPark</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f4f8; /* Light blue-gray background */
            color: #333;
        }
        #root {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex-grow: 1;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        // --- Utility Functions ---
        const generateId = () => Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);

        // --- Language Context ---
        const LanguageContext = React.createContext();

        const translations = {
            en: {
                appName: "SmartPark",
                settings: "Settings",
                logout: "Logout",
                registerForSmartPark: "New User!! Register here....", // Updated text
                fullName: "Full Name",
                mobileNumber: "Mobile Number",
                email: "Email",
                password: "Password",
                register: "Register",
                registrationSuccessful: "Registration Successful!",
                welcomeToSmartPark: "Welcome to SmartPark! You can now search for parking spots.",
                registrationFailed: "Registration Failed",
                pleaseFillAllFields: "Please fill in all fields.",
                findYourParkingSpot: "Find Your Parking Spot",
                selectCity: "Select City",
                enterLocation: "Enter location or destination",
                search: "Search",
                poweredByAI: "Powered by Predictive Availability AI for optimal suggestions.",
                realTimeMapView: "Real-Time Map View",
                available: "Available",
                premium: "Premium",
                occupied: "Occupied",
                searchResults: "Search Results",
                searchingForParking: (loc) => `Searching for parking near "${loc}". Showing real-time availability.`,
                searchError: "Search Error",
                pleaseEnterLocation: "Please enter a location to search.",
                selectYourSlot: "Select Your Slot",
                pricesDynamicallyAdjusted: "Prices are dynamically adjusted based on demand.",
                slotSelected: "Slot Selected",
                youHaveSelected: (slotName, price) => `You have selected ${slotName}. Price: ₹${price}.`,
                selectionRequired: "Selection Required",
                pleaseSelectSlot: "Please select a parking slot first.",
                carWashAddon: "1-Tap Car Wash Add-on (₹150)",
                proceedToBooking: "Proceed to Booking",
                bookingSummary: "Booking Summary",
                noBookingDetails: "No booking details available. Please go back and select a slot.",
                parkingSlot: "Parking Slot",
                basePrice: "Base Price",
                carWash: "1-Tap Car Wash",
                localParkingTax: (rate) => `Local Parking Tax (${rate}%):`,
                totalAmount: "Total Amount:",
                confirmBooking: "Confirm Booking & Pay",
                bookingConfirmed: "Booking Confirmed",
                proceedingToPayment: "Your booking is confirmed! Proceeding to payment.",
                completePayment: "Complete Payment",
                amountDue: "Amount Due:",
                payWithUPI: "Pay with UPI",
                corporateBilling: "Corporate Billing",
                paymentProcessedSecurely: "Your payment is processed securely with tokenization for PCI-DSS compliance.",
                processingPayment: "Processing Payment",
                simulatingUpiPayment: "Simulating UPI payment... Payment tokenized for PCI-DSS compliance.",
                paymentSuccessful: "Payment Successful!",
                paidViaUPI: (amount) => `₹${amount} paid via UPI. Your QR check-in code is ready.`,
                requestSentToCorporate: "Request sent to your corporate account for approval. Payment will be processed automatically.",
                invoiceDetails: "Invoice Details",
                noInvoiceAvailable: "No invoice available. Please complete a booking first.",
                invoiceID: "Invoice ID:",
                date: "Date:",
                service: "Service:",
                addOn: "Add-on:",
                taxableAmount: "Taxable Amount:",
                gst: (rate) => `GST (${rate}%):`,
                totalAmountDue: "Total Amount Due:",
                qrCheckinCode: "QR Check-in Code",
                scanCodeForEntry: "Scan this code at the parking gate for seamless entry and auto-checkout.",
                startNewBooking: "Start New Booking",
                thankYou: "Thank You!",
                parkingExperienceComplete: "Your parking experience is now complete. We look forward to serving you again!",
                appSettings: "App Settings",
                languageRegion: "Language & Region",
                currentLanguage: (lang) => `Current language: ${lang}`,
                familySharing: "Family Sharing",
                shareSubscription: "Share your SmartPark subscription benefits with your family members.",
                manageFamily: "Manage Family",
                familySharingInitiated: "Family sharing setup initiated. Invite members via email.",
                emergencyServices: "Emergency Services",
                requestAssistance: "Request emergency assistance directly from the app.",
                requestJumpStart: "Request Jump-Start",
                jumpStartRequested: "Emergency jump-start service requested. Our team is on the way!",
                dataPrivacy: "Data & Privacy (GDPR)",
                deleteMyAccount: "Delete My Account",
                exerciseRightToDelete: "Exercise your right to data deletion.",
                confirmDeletion: "Confirm Deletion",
                areYouSureDeleteAccount: "Are you sure you want to delete your account? This action is irreversible.",
                gdprDataRemoval: "In accordance with GDPR, all your personal data will be permanently removed.",
                accountDeleted: "Account Deleted",
                accountDeletedMessage: "Your account and all associated data have been permanently deleted as per GDPR compliance.",
                suggestedParkingLocations: "Suggested Parking Locations",
                bestParkingFor: (loc) => `Best Parking for "${loc}"`,
                regularUsedLocations: "Regularly Used Locations",
                location: "Location",
                distance: "Distance",
                availability: "Availability",
                services: "Services",
                carWashDetailing: "Car Wash & Detailing",
                getCarSparkling: "Get your car sparkling while parked.",
                evCharging: "EV Charging",
                findBookCharging: "Find and book charging stations.",
                vehicleMaintenance: "Vehicle Maintenance",
                minorServicing: "Minor servicing at your parking spot.",
                valetParking: "Valet Parking",
                hassleFreeParking: "Hassle-free parking and retrieval.",
                priorityBooking: "Priority Booking for Premium Users",
                premiumBenefits: "Enjoy guaranteed spots and exclusive access with a premium subscription.",
                dynamicPricing: "Dynamic Pricing Explained",
                pricingAdjusts: "Our prices adjust in real-time based on demand, ensuring fair rates.",
                corporateBillingBenefits: "Corporate Billing Benefits",
                streamlineExpenses: "Streamline parking expenses for your business with centralized billing.",
                evChargingLocator: "EV Charging Locator",
                findChargingStations: "Find nearby EV charging stations on the map.",
                locateCharging: "Locate Charging Stations",
                valetParkingService: "Valet Parking Service",
                bookValet: "Book a valet to park your car for ultimate convenience.",
                bookValetService: "Book Valet Service",
                carWashService: "Car Wash Service",
                scheduleCarWash: "Schedule a car wash and detailing while your car is parked.",
                scheduleService: "Schedule Service",
                nearbyAvailableSpots: "Nearby Available Spots",
                spotBookedSuccessfully: (spot) => `Spot at ${spot} booked successfully!`,
                automatedParkingBooked: "Automated parking spot booked successfully!",
                prebookAdvanced: "Advanced Pre-Booking",
                timeFrom: "Time From",
                timeTo: "To",
                confirmPrebook: "Confirm Pre-book",
                prebookSubmitted: "Your pre-booking request has been submitted. We'll notify you when a spot is confirmed!",
                myBookings: "My Bookings",
                status: "Status:",
                confirmed: "Confirmed",
                completed: "Completed",
                repeatBooking: "Repeat Booking",
                login: "Login",
                userLogin: "User Login",
                providerLogin: "Service Provider Login",
                username: "Username",
                loginFailed: "Login Failed",
                invalidCredentials: "Invalid credentials. Please try again.",
                welcomeProvider: "Welcome, Service Provider!",
                dashboard: "Dashboard",
                currentOccupancy: "Current Occupancy",
                parkingSpots: "Parking Spots",
                occupiedSpots: "Occupied Spots",
                availableSpots: "Available Spots",
                manageSpots: "Manage Spots",
                addSpot: "Add Spot",
                spotId: "Spot ID",
                spotType: "Spot Type",
                standard: "Standard",
                premiumSpot: "Premium Spot",
                evChargingSpot: "EV Charging Spot",
                valetSpot: "Valet Spot",
                add: "Add",
                remove: "Remove",
                spotAdded: (id) => `Spot ${id} added!`,
                spotRemoved: (id) => `Spot ${id} removed!`,
                spotAlreadyExists: (id) => `Spot ${id} already exists.` ,
                spotNotFound: (id) => `Spot ${id} not found.`,
                bookingHistory: "Booking History",
                noBookingsYet: "No bookings yet.",
                manageServiceRequests: "Manage Service Requests",
                noServiceRequests: "No service requests.",
                requestType: "Request Type",
                customer: "Customer",
                complete: "Complete",
                requestCompleted: "Request completed!",
                selectUserType: "Select User Type",
                customerApp: "Customer App",
                serviceProviderApp: "Service Provider App",
                copyright: "© 2025 SmartPark. All rights reserved.",
                enhancedWithAI: "Enhanced with AI, compliant with global standards, and designed for your convenience.",
                forgotPassword: "Forgot Password?",
                resetPassword: "Reset Password",
                enterEmailForReset: "Enter your email to receive a password reset link.",
                sendResetLink: "Send Reset Link",
                resetLinkSent: "If an account with that email exists, a password reset link has been sent.",
                backToLogin: "Back to Login",
                providerRegistration: "Provider Registration",
                registerAsProvider: "Register as a Service Provider",
                backToUserTypeSelection: "Back to User Type Selection",
                currentLocation: "Current Location",
                close: "Close",
                aboutUs: "About Us",
                aboutUsContent: "SmartPark is dedicated to revolutionizing urban mobility by providing smart, efficient, and user-friendly parking solutions. Our mission is to reduce traffic congestion, minimize parking search times, and enhance the overall urban experience through innovative technology and strategic partnerships.\n\nOur Team:\n- Nilabja Sen\n- Animesh\n- Armaan Sanket\n- Sukhbir Sohal\n- Rahul",
                disclaimer: "Disclaimer: This application is a prototype for demonstration purposes. All data, prices, and services are simulated. Real-world functionality may vary.",
                emailSent: "Registration email sent to ",
                carModel: "Car Model",
                carCompany: "Car Company",
                maintenanceType: "Maintenance Type",
                selectMaintenance: "Select Maintenance Type",
                oilChange: "Oil Change",
                tireRotation: "Tire Rotation",
                brakeInspection: "Brake Inspection",
                fullService: "Full Service",
                other: "Other",
                scheduleBooking: "Schedule Booking",
                bookingScheduled: "Booking Scheduled!",
                pickUpLocation: "Pick-up Location",
                dropOffLocation: "Drop-off Location",
                valetBooking: "Valet Booking",
                valetBooked: "Valet service booked!",
                gpsRequired: "GPS Location Required",
                enableGpsMessage: "Please enable GPS location for this service to work.",
                enableGps: "Enable GPS",
                gpsEnabled: "GPS Enabled!",
                comingSoon: "Coming Soon!",
                comingSoonMessage: "Hey!! We are coming to your city soon... Happy Booking.",
                lastBooked: "Last Booked",
                peakHours: "Peak Hours",
                fillingFast: "Filling Fast",
                spotsAvailable: (num) => `${num} Spots Available`,
                moreDetails: "More Details",
                loginSuccessful: "Login Successful!"
            },
            hi: {
                appName: "स्मार्टपार्क",
                settings: "सेटिंग्स",
                logout: "लॉगआउट",
                registerForSmartPark: "नया उपयोगकर्ता!! यहाँ रजिस्टर करें....",
                fullName: "पूरा नाम",
                mobileNumber: "मोबाइल नंबर",
                email: "ईमेल",
                password: "पासवर्ड",
                register: "रजिस्टर करें",
                registrationSuccessful: "पंजीकरण सफल!",
                welcomeToSmartPark: "स्मार्टपार्क में आपका स्वागत है! अब आप पार्किंग स्थल खोज सकते हैं।",
                registrationFailed: "पंजीकरण विफल",
                pleaseFillAllFields: "कृपया सभी फ़ील्ड भरें।",
                findYourParkingSpot: "अपनी पार्किंग स्पॉट खोजें",
                selectCity: "शहर चुनें",
                enterLocation: "स्थान या गंतव्य दर्ज करें",
                search: "खोजें",
                poweredByAI: "इष्टतम सुझावों के लिए प्रेडिक्टिव उपलब्धता AI द्वारा संचालित।",
                realTimeMapView: "रीयल-टाइम मानचित्र दृश्य",
                available: "उपलब्ध",
                premium: "प्रीमियम",
                occupied: "व्यस्त",
                searchResults: "खोज परिणाम",
                searchingForParking: (loc) => `"${loc}" के पास पार्किंग खोज रहे हैं। रीयल-टाइम उपलब्धता दिखा रहा है।`,
                searchError: "खोज त्रुटि",
                pleaseEnterLocation: "कृपया खोजने के लिए एक स्थान दर्ज करें।",
                selectYourSlot: "अपना स्लॉट चुनें",
                pricesDynamicallyAdjusted: "मांग के आधार पर कीमतें गतिशील रूप से समायोजित की जाती हैं।",
                slotSelected: "स्लॉट चुना गया",
                youHaveSelected: (slotName, price) => `आपने ${slotName} चुना है। कीमत: ₹${price}.`,
                selectionRequired: "चयन आवश्यक",
                pleaseSelectSlot: "कृपया पहले एक पार्किंग स्लॉट चुनें।",
                carWashAddon: "1-टैप कार वॉश ऐड-ऑन (₹150)",
                proceedToBooking: "बुकिंग के लिए आगे बढ़ें",
                bookingSummary: "बुकिंग सारांश",
                noBookingDetails: "कोई बुकिंग विवरण उपलब्ध नहीं है। कृपया वापस जाएं और एक स्लॉट चुनें।",
                parkingSlot: "पार्किंग स्लॉट",
                basePrice: "मूल्य",
                carWash: "1-टैप कार वॉश",
                localParkingTax: (rate) => `स्थानीय पार्किंग कर (${rate}%):`,
                totalAmount: "कुल राशि:",
                confirmBooking: "बुकिंग की पुष्टि करें और भुगतान करें",
                bookingConfirmed: "बुकिंग की पुष्टि हो गई",
                proceedingToPayment: "आपकी बुकिंग की पुष्टि हो गई है! भुगतान के लिए आगे बढ़ रहे हैं।",
                completePayment: "भुगतान पूरा करें",
                amountDue: "देय राशि:",
                payWithUPI: "UPI से भुगतान करें",
                corporateBilling: "कॉर्पोरेट बिलिंग",
                paymentProcessedSecurely: "आपका भुगतान PCI-DSS अनुपालन के लिए टोकनाइजेशन के साथ सुरक्षित रूप से संसाधित किया जाता है।",
                processingPayment: "भुगतान संसाधित हो रहा है",
                simulatingUpiPayment: "UPI भुगतान का अनुकरण कर रहा है... PCI-DSS अनुपालन के लिए भुगतान टोकनाइज किया गया।",
                paymentSuccessful: "भुगतान सफल!",
                paidViaUPI: (amount) => `₹${amount} UPI के माध्यम से भुगतान किया गया। आपका QR चेक-इन कोड तैयार है।`,
                requestSentToCorporate: "आपके कॉर्पोरेट खाते में अनुमोदन के लिए अनुरोध भेजा गया। भुगतान स्वचालित रूप से संसाधित किया जाएगा।",
                invoiceDetails: "चालान विवरण",
                noInvoiceAvailable: "कोई चालान उपलब्ध नहीं है। कृपया पहले एक बुकिंग पूरी करें।",
                invoiceID: "चालान आईडी:",
                date: "दिनांक:",
                service: "सेवा:",
                addOn: "ऐड-ऑन:",
                taxableAmount: "कर योग्य राशि:",
                gst: (rate) => `GST (${rate}%):`,
                totalAmountDue: "कुल देय राशि:",
                qrCheckinCode: "QR चेक-इन कोड",
                scanCodeForEntry: "निर्बाध प्रवेश और ऑटो-चेकआउट के लिए पार्किंग गेट पर इस कोड को स्कैन करें।",
                startNewBooking: "नई बुकिंग शुरू करें",
                thankYou: "धन्यवाद!",
                parkingExperienceComplete: "आपका पार्किंग अनुभव अब पूरा हो गया है। हम आपकी फिर से सेवा करने की उम्मीद करते हैं!",
                appSettings: "ऐप सेटिंग्स",
                languageRegion: "भाषा और क्षेत्र",
                currentLanguage: (lang) => `वर्तमान भाषा: ${lang}`,
                familySharing: "परिवार साझाकरण",
                shareSubscription: "अपनी स्मार्टपार्क सदस्यता के लाभ अपने परिवार के सदस्यों के साथ साझा करें।",
                manageFamily: "परिवार प्रबंधित करें",
                familySharingInitiated: "परिवार साझाकरण सेटअप शुरू किया गया। ईमेल के माध्यम से सदस्यों को आमंत्रित करें।",
                emergencyServices: "आपातकालीन सेवाएं",
                requestAssistance: "ऐप से सीधे आपातकालीन सहायता का अनुरोध करें।",
                requestJumpStart: "जंप-स्टार्ट का अनुरोध करें",
                jumpStartRequested: "आपातकालीन जंप-स्टार्ट सेवा का अनुरोध किया गया। हमारी टीम रास्ते में है!",
                dataPrivacy: "डेटा और गोपनीयता (GDPR)",
                deleteMyAccount: "मेरा खाता हटाएँ",
                exerciseRightToDelete: "डेटा हटाने के अपने अधिकार का प्रयोग करें।",
                confirmDeletion: "हटाने की पुष्टि करें",
                areYouSureDeleteAccount: "क्या आप वाकई अपना खाता हटाना चाहते हैं? यह कार्रवाई अपरिवर्तनीय है।",
                gdprDataRemoval: "GDPR के अनुसार, आपका सभी व्यक्तिगत डेटा स्थायी रूप से हटा दिया जाएगा।",
                accountDeleted: "खाता हटा दिया गया",
                accountDeletedMessage: "GDPR अनुपालन के अनुसार आपका खाता और सभी संबंधित डेटा स्थायी रूप से हटा दिए गए हैं।",
                suggestedParkingLocations: "सुझाए गए पार्किंग स्थान",
                bestParkingFor: (loc) => `"${loc}" के लिए सर्वश्रेष्ठ पार्किंग`,
                regularUsedLocations: "नियमित रूप से उपयोग किए जाने वाले स्थान",
                location: "स्थान",
                distance: "दूरी",
                availability: "उपलब्धता",
                services: "सेवाएं",
                carWashDetailing: "कार वॉश और डिटेलिंग",
                getCarSparkling: "पार्क करते समय अपनी कार को चमकाएँ।",
                evCharging: "ईवी चार्जिंग",
                findBookCharging: "चार्जिंग स्टेशन खोजें और बुक करें।",
                vehicleMaintenance: "वाहन रखरखाव",
                minorServicing: "आपकी पार्किंग स्पॉट पर छोटी सर्विसिंग।",
                valetParking: "वैले पार्किंग",
                hassleFreeParking: "परेशानी मुक्त पार्किंग और पुनः प्राप्त करना।",
                priorityBooking: "प्रीमियम उपयोगकर्ताओं के लिए प्राथमिकता बुकिंग",
                premiumBenefits: "प्रीमियम सदस्यता के साथ गारंटीकृत स्पॉट और विशेष पहुंच का आनंद लें।",
                dynamicPricing: "गतिशील मूल्य निर्धारण समझाया गया",
                pricingAdjusts: "हमारी कीमतें मांग के आधार पर वास्तविक समय में समायोजित होती हैं, जिससे उचित दरें सुनिश्चित होती हैं।",
                corporateBillingBenefits: "कॉर्पोरेट बिलिंग लाभ",
                streamlineExpenses: "केंद्रीकृत बिलिंग के साथ अपने व्यवसाय के लिए पार्किंग खर्चों को सुव्यवस्थित करें।",
                evChargingLocator: "ईवी चार्जिंग लोकेटर",
                findChargingStations: "मानचित्र पर आस-पास के ईवी चार्जिंग स्टेशन खोजें।",
                locateCharging: "चार्जिंग स्टेशन खोजें",
                valetParkingService: "वैले पार्किंग सेवा",
                bookValet: "अंतिम सुविधा के लिए अपनी कार पार्क करने के लिए एक वैले बुक करें।",
                bookValetService: "वैले सेवा बुक करें",
                carWashService: "कार वॉश सेवा",
                scheduleCarWash: "अपनी कार पार्क करते समय कार वॉश और डिटेलिंग शेड्यूल करें।",
                scheduleService: "सेवा शेड्यूल करें",
                nearbyAvailableSpots: "आस-पास उपलब्ध स्पॉट",
                spotBookedSuccessfully: (spot) => `${spot} पर स्पॉट सफलतापूर्वक बुक किया गया!`,
                automatedParkingBooked: "स्वचालित पार्किंग स्पॉट सफलतापूर्वक बुक किया गया!",
                prebookAdvanced: "उन्नत प्री-बुकिंग",
                timeFrom: "समय से",
                timeTo: "तक",
                confirmPrebook: "प्री-बुक की पुष्टि करें",
                prebookSubmitted: "आपका प्री-बुकिंग अनुरोध जमा कर दिया गया है। स्पॉट की पुष्टि होने पर हम आपको सूचित करेंगे!",
                myBookings: "मेरी बुकिंग",
                status: "स्थिति:",
                confirmed: "पुष्टि की गई",
                completed: "पूरा हो गया",
                repeatBooking: "बुकिंग दोहराएँ",
                login: "लॉगिन",
                userLogin: "उपयोगकर्ता लॉगिन",
                providerLogin: "सेवा प्रदाता लॉगिन",
                username: "उपयोगकर्ता नाम",
                loginFailed: "लॉगिन विफल",
                invalidCredentials: "अमान्य क्रेडेंशियल। कृपया पुनः प्रयास करें।",
                welcomeProvider: "स्वागत है, सेवा प्रदाता!",
                dashboard: "डैशबोर्ड",
                currentOccupancy: "वर्तमान अधिभोग",
                parkingSpots: "पार्किंग स्पॉट",
                occupiedSpots: "व्यस्त स्पॉट",
                availableSpots: "उपलब्ध स्पॉट",
                manageSpots: "स्पॉट प्रबंधित करें",
                addSpot: "स्पॉट जोड़ें",
                spotId: "स्पॉट आईडी",
                spotType: "स्पॉट प्रकार",
                standard: "मानक",
                premiumSpot: "प्रीमियम स्पॉट",
                evChargingSpot: "ईवी चार्जिंग स्पॉट",
                valetSpot: "वैले स्पॉट",
                add: "जोड़ें",
                remove: "हटाएँ",
                spotAdded: (id) => `स्पॉट ${id} जोड़ा गया!`,
                spotRemoved: (id) => `स्पॉट ${id} हटाया गया!`,
                spotAlreadyExists: (id) => `स्पॉट ${id} पहले से मौजूद है।`,
                spotNotFound: (id) => `स्पॉट ${id} नहीं मिला।`,
                bookingHistory: "बुकिंग इतिहास",
                noBookingsYet: "अभी तक कोई बुकिंग नहीं।",
                manageServiceRequests: "सेवा अनुरोध प्रबंधित करें",
                noServiceRequests: "कोई सेवा अनुरोध नहीं।",
                requestType: "अनुरोध प्रकार",
                customer: "ग्राहक",
                complete: "पूरा करें",
                requestCompleted: "अनुरोध पूरा हुआ!",
                selectUserType: "उपयोगकर्ता प्रकार चुनें",
                customerApp: "ग्राहक ऐप",
                serviceProviderApp: "सेवा प्रदाता ऐप",
                copyright: "© 2025 स्मार्टपार्क। सर्वाधिकार सुरक्षित।",
                enhancedWithAI: "AI से बेहतर, वैश्विक मानकों के अनुरूप, और आपकी सुविधा के लिए डिज़ाइन किया गया।",
                forgotPassword: "पासवर्ड भूल गए?",
                resetPassword: "पासवर्ड रीसेट करें",
                enterEmailForReset: "पासवर्ड रीसेट लिंक प्राप्त करने के लिए अपना ईमेल दर्ज करें।",
                sendResetLink: "रीसेट लिंक भेजें",
                resetLinkSent: "यदि उस ईमेल के साथ कोई खाता मौजूद है, तो एक पासवर्ड रीसेट लिंक भेजा गया है।",
                backToLogin: "लॉगिन पर वापस",
                providerRegistration: "प्रदाता पंजीकरण",
                registerAsProvider: "सेवा प्रदाता के रूप में पंजीकरण करें",
                backToUserTypeSelection: "उपयोगकर्ता प्रकार चयन पर वापस",
                currentLocation: "वर्तमान स्थान",
                close: "बंद करें",
                aboutUs: "हमारे बारे में",
                aboutUsContent: "स्मार्टपार्क स्मार्ट, कुशल और उपयोगकर्ता के अनुकूल पार्किंग समाधान प्रदान करके शहरी गतिशीलता में क्रांति लाने के लिए समर्पित है। हमारा मिशन यातायात भीड़ को कम करना, पार्किंग खोज समय को कम करना और अभिनव प्रौद्योगिकी और रणनीतिक साझेदारी के माध्यम से समग्र शहरी अनुभव को बढ़ाना है।\n\nहमारी टीम:\n- निलाबजा सेन\n- अनिमेश\n- अरमान संकेत\n- सुखबीर सोहल\n- राहुल",
                disclaimer: "अस्वीकरण: यह एप्लिकेशन प्रदर्शन उद्देश्यों के लिए एक प्रोटोटाइप है। सभी डेटा, कीमतें और सेवाएं सिम्युलेटेड हैं। वास्तविक दुनिया की कार्यक्षमता भिन्न हो सकती है।",
                emailSent: "पंजीकरण ईमेल भेजा गया ",
                carModel: "कार मॉडल",
                carCompany: "कार कंपनी",
                maintenanceType: "रखरखाव प्रकार",
                selectMaintenance: "रखरखाव प्रकार चुनें",
                oilChange: "तेल परिवर्तन",
                tireRotation: "टायर रोटेशन",
                brakeInspection: "ब्रेक निरीक्षण",
                fullService: "पूर्ण सेवा",
                other: "अन्य",
                scheduleBooking: "बुकिंग शेड्यूल करें",
                bookingScheduled: "बुकिंग शेड्यूल की गई!",
                pickUpLocation: "पिक-अप स्थान",
                dropOffLocation: "ड्रॉप-ऑफ स्थान",
                valetBooking: "वैले बुकिंग",
                valetBooked: "वैले सेवा बुक की गई!",
                gpsRequired: "जीपीएस स्थान आवश्यक",
                enableGpsMessage: "इस सेवा के काम करने के लिए कृपया जीपीएस स्थान सक्षम करें।",
                enableGps: "जीपीएस सक्षम करें",
                gpsEnabled: "जीपीएस सक्षम!",
                comingSoon: "जल्द आ रहा है!",
                comingSoonMessage: "हे!! हम जल्द ही आपके शहर में भी आ रहे हैं... हैप्पी बुकिंग।",
                lastBooked: "अंतिम बुक किया गया",
                peakHours: "पीक आवर्स",
                fillingFast: "तेजी से भर रहा है",
                spotsAvailable: (num) => `${num} स्पॉट उपलब्ध`,
                moreDetails: "अधिक विवरण",
                loginSuccessful: "लॉगिन सफल!"
            }
        };

        // --- Reusable Modal Component ---
        const Modal = ({ show, title, message, onClose, children }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            if (!show) return null;

            return (
                <div className="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50">
                    <div className="bg-blue-900 p-6 rounded-2xl shadow-xl text-center max-w-lg w-full space-y-4 border border-blue-700">
                        {title && <h3 className="text-2xl font-bold text-amber-400 mb-2">{title}</h3>}
                        {message && <p className="text-white text-lg">{message}</p>}
                        {children}
                        <button
                            onClick={onClose}
                            className="mt-4 bg-amber-400 text-blue-900 font-bold py-2 px-5 rounded-xl hover:bg-amber-500 transition duration-300"
                        >
                            {t.close}
                        </button>
                    </div>
                </div>
            );
        };

        // --- Header Component ---
        const Header = ({ onNavigate, onLogout, showLogout = true }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            return (
                <header className="bg-blue-800 p-4 shadow-lg flex items-center justify-between sticky top-0 z-20">
                    <div className="flex items-center space-x-2">
                        <span className="text-amber-400 text-4xl font-black relative">
                            P
                            <span className="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-white text-xl font-bold">
                                &#x27A4;
                            </span>
                        </span>
                        <h1 className="text-3xl font-extrabold text-white">{t.appName}</h1>
                    </div>
                    <nav className="flex items-center space-x-4">
                        <button onClick={() => onNavigate('settings')} className="text-blue-200 hover:text-white text-lg font-semibold">⚙️ {t.settings}</button>
                        {showLogout && (
                            <button onClick={onLogout} className="bg-red-600 text-white font-bold py-2 px-4 rounded-xl hover:bg-red-700 transition duration-300">
                                {t.logout}
                            </button>
                        )}
                    </nav>
                </header>
            );
        };

        // --- Footer Component ---
        const Footer = () => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            return (
                <footer className="text-center py-8 mt-16 border-t border-blue-200 bg-blue-800 text-blue-200">
                    <p>{t.copyright}</p>
                    <p className="text-sm mt-2">{t.enhancedWithAI}</p>
                </footer>
            );
        };

        // --- Forgot Password Screen ---
        const ForgotPasswordScreen = ({ onBackToLogin, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [email, setEmail] = React.useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                showModal(t.resetPassword, t.resetLinkSent);
                setEmail('');
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-[calc(100vh-160px)] p-4 bg-white text-blue-900">
                    <div className="bg-blue-50 rounded-2xl p-8 shadow-xl max-w-md w-full border border-blue-200">
                        <h2 className="text-3xl font-bold text-amber-600 mb-6 text-center">{t.forgotPassword}</h2>
                        <p className="text-blue-800 mb-4 text-center">{t.enterEmailForReset}</p>
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label htmlFor="reset-email" className="block text-blue-800 text-sm font-bold mb-2">{t.email}</label>
                                <input
                                    type="email"
                                    id="reset-email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="your.email@example.com"
                                    aria-label={t.email}
                                />
                            </div>
                            <button
                                type="submit"
                                className="w-full bg-pink-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-pink-700 transition duration-300 shadow-lg"
                                aria-label={t.sendResetLink}
                            >
                                {t.sendResetLink}
                            </button>
                        </form>
                        <button
                            onClick={onBackToLogin}
                            className="mt-6 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                            aria-label={t.backToLogin}
                        >
                            {t.backToLogin}
                        </button>
                    </div>
                </div>
            );
        };

        // --- Customer App Screens ---

        // Customer Login Screen
        const CustomerLoginScreen = ({ onLoginSuccess, onRegisterClick, onForgotPasswordClick, onBackToUserTypeSelection, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [email, setEmail] = React.useState('');
            const [password, setPassword] = React.useState('');

            const handleLogin = (e) => {
                e.preventDefault();
                // Simple mock authentication
                if (email === 'user@example.com' && password === 'password') {
                    showModal(t.loginSuccessful, t.welcomeToSmartPark);
                    onLoginSuccess();
                } else {
                    showModal(t.loginFailed, t.invalidCredentials);
                }
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-[calc(100vh-160px)] p-4 bg-white text-blue-900">
                    <div className="bg-blue-50 rounded-2xl p-8 shadow-xl max-w-md w-full border border-blue-200">
                        <h2 className="text-3xl font-bold text-amber-600 mb-6 text-center">{t.userLogin}</h2>
                        <form onSubmit={handleLogin} className="space-y-4">
                            <div>
                                <label htmlFor="customer-email" className="block text-blue-800 text-sm font-bold mb-2">{t.email}</label>
                                <input
                                    type="email"
                                    id="customer-email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="user@example.com"
                                    aria-label={t.email}
                                />
                            </div>
                            <div>
                                <label htmlFor="customer-password" className="block text-blue-800 text-sm font-bold mb-2">{t.password}</label>
                                <input
                                    type="password"
                                    id="customer-password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="password"
                                    aria-label={t.password}
                                />
                            </div>
                            <button
                                type="submit"
                                className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                                aria-label={t.login}
                            >
                                {t.login}
                            </button>
                        </form>
                        <button
                            onClick={onForgotPasswordClick}
                            className="mt-4 w-full text-blue-800 text-sm font-bold hover:underline"
                            aria-label={t.forgotPassword}
                        >
                            {t.forgotPassword}
                        </button>
                        <button
                            onClick={onRegisterClick}
                            className="mt-2 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                            aria-label={t.registerForSmartPark}
                        >
                            {t.registerForSmartPark}
                        </button>
                        <button
                            onClick={onBackToUserTypeSelection}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                            aria-label={t.backToUserTypeSelection}
                        >
                            {t.backToUserTypeSelection}
                        </button>
                    </div>
                </div>
            );
        };

        // Registration Screen (for Customer)
        const RegistrationScreen = ({ onRegisterSuccess, onLoginClick, onBackToUserTypeSelection, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [name, setName] = React.useState('');
            const [mobile, setMobile] = React.useState('');
            const [email, setEmail] = React.useState('');
            const [password, setPassword] = React.useState('');

            const handleRegister = (e) => {
                e.preventDefault();
                if (name && mobile && email && password) {
                    showModal(t.registrationSuccessful, t.welcomeToSmartPark);
                    console.log(t.emailSent + email); // Simulate sending email
                    onRegisterSuccess();
                } else {
                    showModal(t.registrationFailed, t.pleaseFillAllFields);
                }
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-[calc(100vh-160px)] p-4 bg-white text-blue-900">
                    <div className="bg-blue-50 rounded-2xl p-8 shadow-xl max-w-md w-full border border-blue-200">
                        <h2 className="text-3xl font-bold text-amber-600 mb-6 text-center">{t.registerForSmartPark}</h2>
                        <form onSubmit={handleRegister} className="space-y-4">
                            <div>
                                <label htmlFor="name" className="block text-blue-800 text-sm font-bold mb-2">{t.fullName}</label>
                                <input
                                    type="text"
                                    id="name"
                                    value={name}
                                    onChange={(e) => setName(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="John Doe"
                                    aria-label={t.fullName}
                                />
                            </div>
                            <div>
                                <label htmlFor="mobile" className="block text-blue-800 text-sm font-bold mb-2">{t.mobileNumber}</label>
                                <input
                                    type="tel"
                                    id="mobile"
                                    value={mobile}
                                    onChange={(e) => setMobile(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="9876543210"
                                    aria-label={t.mobileNumber}
                                />
                            </div>
                            <div>
                                <label htmlFor="email" className="block text-blue-800 text-sm font-bold mb-2">{t.email}</label>
                                <input
                                    type="email"
                                    id="email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="john.doe@example.com"
                                    aria-label={t.email}
                                />
                            </div>
                            <div>
                                <label htmlFor="password" className="block text-blue-800 text-sm font-bold mb-2">{t.password}</label>
                                <input
                                    type="password"
                                    id="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="********"
                                    aria-label={t.password}
                                />
                            </div>
                            <button
                                type="submit"
                                className="w-full bg-pink-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-pink-700 transition duration-300 shadow-lg"
                                aria-label={t.register}
                            >
                                {t.register}
                            </button>
                        </form>
                        <button
                            onClick={onLoginClick}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                            aria-label={t.login}
                        >
                            {t.login}
                        </button>
                        <button
                            onClick={onBackToUserTypeSelection}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                            aria-label={t.backToUserTypeSelection}
                        >
                            {t.backToUserTypeSelection}
                        </button>
                    </div>
                </div>
            );
        };

        // Main Customer Dashboard/Search Screen
        const CustomerDashboard = ({ onNavigate, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [city, setCity] = React.useState('');
            const [location, setLocation] = React.useState('');
            const [searchResults, setSearchResults] = React.useState(null);
            const [loading, setLoading] = React.useState(false);
            const [showGpsModal, setShowGpsModal] = React.useState(false);
            const [gpsEnabled, setGpsEnabled] = React.useState(false);

            const handleSearch = async (e) => {
                e.preventDefault();
                if (!location) {
                    showModal(t.searchError, t.pleaseEnterLocation);
                    return;
                }
                setLoading(true);
                setSearchResults(null); // Clear previous results
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                setSearchResults([
                    { id: generateId(), name: "City Center Parking", distance: "0.5 km", availability: "Available", price: 50, type: "standard" },
                    { id: generateId(), name: "Mall Parking (Premium)", distance: "1.2 km", availability: "Premium", price: 120, type: "premium" },
                    { id: generateId(), name: "EV Charging Hub", distance: "0.8 km", availability: "Available", price: 70, type: "ev" },
                    { id: generateId(), name: "Railway Station Parking", distance: "2.0 km", availability: "Occupied", price: 60, type: "standard" },
                ]);
                setLoading(false);
            };

            const handleEnableGps = () => {
                setShowGpsModal(true);
            };

            const confirmEnableGps = () => {
                setGpsEnabled(true);
                setShowGpsModal(false);
                showModal(t.gpsEnabled, " ");
            };

            const handleComingSoon = () => {
                showModal(t.comingSoon, t.comingSoonMessage);
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-4xl mx-auto">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.findYourParkingSpot}</h2>

                        {/* Search Section */}
                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <form onSubmit={handleSearch} className="space-y-4">
                                <div>
                                    <label htmlFor="city-select" className="block text-blue-800 text-sm font-bold mb-2">{t.selectCity}</label>
                                    <select
                                        id="city-select"
                                        value={city}
                                        onChange={(e) => setCity(e.target.value)}
                                        className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                        aria-label={t.selectCity}
                                    >
                                        <option value="">Select City</option>
                                        <option value="Bengaluru">Bengaluru</option>
                                        <option value="Mumbai">Mumbai</option>
                                        <option value="Delhi">Delhi</option>
                                    </select>
                                </div>
                                <div>
                                    <label htmlFor="location-input" className="block text-blue-800 text-sm font-bold mb-2">{t.enterLocation}</label>
                                    <input
                                        type="text"
                                        id="location-input"
                                        value={location}
                                        onChange={(e) => setLocation(e.target.value)}
                                        className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                        placeholder="e.g., MG Road, Indiranagar"
                                        aria-label={t.enterLocation}
                                    />
                                </div>
                                <button
                                    type="submit"
                                    className="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg"
                                    aria-label={t.search}
                                >
                                    {loading ? 'Searching...' : t.search}
                                </button>
                            </form>
                            <p className="text-center text-blue-600 text-sm mt-4">{t.poweredByAI}</p>
                        </section>

                        {/* Real-Time Map View (Placeholder) */}
                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <h3 className="text-2xl font-bold text-blue-800 mb-4">{t.realTimeMapView}</h3>
                            <div className="h-64 bg-blue-100 rounded-xl flex items-center justify-center text-blue-400 text-lg font-semibold border border-blue-200">
                                {/* Placeholder for map */}
                                Map View Coming Soon!
                            </div>
                            <div className="flex justify-around mt-4 text-sm font-semibold">
                                <span className="text-green-600">🟢 {t.available}</span>
                                <span className="text-amber-600">🟡 {t.premium}</span>
                                <span className="text-red-600">🔴 {t.occupied}</span>
                            </div>
                        </section>

                        {/* Search Results */}
                        {loading && (
                            <div className="text-center text-blue-700 text-lg mt-8">
                                <p>{t.searchingForParking(location)}</p>
                                <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700 mx-auto mt-4"></div>
                            </div>
                        )}

                        {searchResults && searchResults.length > 0 && (
                            <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                                <h3 className="text-2xl font-bold text-blue-800 mb-4">{t.searchResults}</h3>
                                <div className="space-y-4">
                                    {searchResults.map(spot => (
                                        <div key={spot.id} className="flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-blue-100">
                                            <div>
                                                <p className="text-lg font-semibold text-blue-900">{spot.name}</p>
                                                <p className="text-blue-600 text-sm">{spot.distance}</p>
                                            </div>
                                            <div className="text-right">
                                                <p className={`font-bold ${spot.availability === 'Available' ? 'text-green-600' : spot.availability === 'Premium' ? 'text-amber-600' : 'text-red-600'}`}>
                                                    {spot.availability}
                                                </p>
                                                <button
                                                    onClick={() => onNavigate('slotSelection', { spot })}
                                                    className="mt-2 bg-blue-500 text-white text-sm py-1 px-3 rounded-lg hover:bg-blue-600 transition duration-300"
                                                    disabled={spot.availability === 'Occupied'}
                                                >
                                                    {t.selectYourSlot}
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </section>
                        )}

                        {/* Suggested Parking Locations */}
                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <h3 className="text-2xl font-bold text-blue-800 mb-4">{t.suggestedParkingLocations}</h3>
                            <div className="space-y-4">
                                <div className="flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-blue-100">
                                    <div>
                                        <p className="text-lg font-semibold text-blue-900">Phoenix Marketcity</p>
                                        <p className="text-blue-600 text-sm">{t.lastBooked}</p>
                                    </div>
                                    <div className="text-right">
                                        <p className="font-bold text-green-600">{t.spotsAvailable(15)}</p>
                                        <button
                                            onClick={() => onNavigate('slotSelection', { spot: { id: generateId(), name: "Phoenix Marketcity", distance: "3.0 km", availability: "Available", price: 80, type: "standard" } })}
                                            className="mt-2 bg-blue-500 text-white text-sm py-1 px-3 rounded-lg hover:bg-blue-600 transition duration-300"
                                        >
                                            {t.selectYourSlot}
                                        </button>
                                    </div>
                                </div>
                                <div className="flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-blue-100">
                                    <div>
                                        <p className="text-lg font-semibold text-blue-900">Koramangala 5th Block</p>
                                        <p className="text-blue-600 text-sm">{t.peakHours}</p>
                                    </div>
                                    <div className="text-right">
                                        <p className="font-bold text-amber-600">{t.fillingFast}</p>
                                        <button
                                            onClick={() => onNavigate('slotSelection', { spot: { id: generateId(), name: "Koramangala 5th Block", distance: "4.5 km", availability: "Premium", price: 100, type: "premium" } })}
                                            className="mt-2 bg-blue-500 text-white text-sm py-1 px-3 rounded-lg hover:bg-blue-600 transition duration-300"
                                        >
                                            {t.selectYourSlot}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </section>

                        {/* Services Section */}
                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <h3 className="text-2xl font-bold text-blue-800 mb-4">{t.services}</h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100 flex items-center space-x-4">
                                    <span className="text-4xl">🚗</span>
                                    <div>
                                        <p className="font-semibold text-blue-900">{t.carWashDetailing}</p>
                                        <p className="text-blue-600 text-sm">{t.getCarSparkling}</p>
                                        <button onClick={() => onNavigate('carWash')} className="mt-2 text-blue-500 hover:underline text-sm">{t.scheduleService}</button>
                                    </div>
                                </div>
                                <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100 flex items-center space-x-4">
                                    <span className="text-4xl">⚡</span>
                                    <div>
                                        <p className="font-semibold text-blue-900">{t.evCharging}</p>
                                        <p className="text-blue-600 text-sm">{t.findBookCharging}</p>
                                        <button onClick={handleComingSoon} className="mt-2 text-blue-500 hover:underline text-sm">{t.locateCharging}</button>
                                    </div>
                                </div>
                                <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100 flex items-center space-x-4">
                                    <span className="text-4xl">🔧</span>
                                    <div>
                                        <p className="font-semibold text-blue-900">{t.vehicleMaintenance}</p>
                                        <p className="text-blue-600 text-sm">{t.minorServicing}</p>
                                        <button onClick={() => onNavigate('vehicleMaintenance')} className="mt-2 text-blue-500 hover:underline text-sm">{t.scheduleService}</button>
                                    </div>
                                </div>
                                <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100 flex items-center space-x-4">
                                    <span className="text-4xl">🤵</span>
                                    <div>
                                        <p className="font-semibold text-blue-900">{t.valetParking}</p>
                                        <p className="text-blue-600 text-sm">{t.hassleFreeParking}</p>
                                        <button onClick={() => onNavigate('valetParking')} className="mt-2 text-blue-500 hover:underline text-sm">{t.bookValetService}</button>
                                    </div>
                                </div>
                            </div>
                        </section>

                        {/* Other Features */}
                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <h3 className="text-2xl font-bold text-blue-800 mb-4">More SmartPark Features</h3>
                            <div className="space-y-4">
                                <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100">
                                    <h4 className="font-semibold text-blue-900">{t.priorityBooking}</h4>
                                    <p className="text-blue-600 text-sm">{t.premiumBenefits}</p>
                                </div>
                                <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100">
                                    <h4 className="font-semibold text-blue-900">{t.dynamicPricing}</h4>
                                    <p className="text-blue-600 text-sm">{t.pricingAdjusts}</p>
                                </div>
                                <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100">
                                    <h4 className="font-semibold text-blue-900">{t.corporateBillingBenefits}</h4>
                                    <p className="text-blue-600 text-sm">{t.streamlineExpenses}</p>
                                </div>
                            </div>
                        </section>
                    </div>

                    <Modal
                        show={showGpsModal}
                        title={t.gpsRequired}
                        message={t.enableGpsMessage}
                        onClose={() => setShowGpsModal(false)}
                    >
                        <button
                            onClick={confirmEnableGps}
                            className="bg-green-500 text-white font-bold py-2 px-4 rounded-xl hover:bg-green-600 transition duration-300 mt-4"
                        >
                            {t.enableGps}
                        </button>
                    </Modal>
                </main>
            );
        };

        // Slot Selection Screen
        const SlotSelectionScreen = ({ onNavigate, selectedSpot, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [selectedSlot, setSelectedSlot] = React.useState(null);
            const [carWash, setCarWash] = React.useState(false);

            const parkingSlots = [
                { id: 'A1', name: 'Slot A1', price: selectedSpot.price + 10, available: true },
                { id: 'A2', name: 'Slot A2', price: selectedSpot.price, available: true },
                { id: 'B1', name: 'Slot B1', price: selectedSpot.price + 5, available: false },
                { id: 'B2', name: 'Slot B2', price: selectedSpot.price + 15, available: true },
            ];

            const handleSlotSelect = (slot) => {
                setSelectedSlot(slot);
                showModal(t.slotSelected, t.youHaveSelected(slot.name, slot.price));
            };

            const handleProceedToBooking = () => {
                if (selectedSlot) {
                    onNavigate('bookingSummary', { selectedSpot, selectedSlot, carWash });
                } else {
                    showModal(t.selectionRequired, t.pleaseSelectSlot);
                }
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-4xl mx-auto">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.selectYourSlot}</h2>
                        <p className="text-center text-blue-600 mb-6">{t.pricesDynamicallyAdjusted}</p>

                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <h3 className="text-2xl font-bold text-blue-800 mb-4">{selectedSpot.name} - {selectedSpot.distance}</h3>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                {parkingSlots.map(slot => (
                                    <button
                                        key={slot.id}
                                        onClick={() => handleSlotSelect(slot)}
                                        disabled={!slot.available}
                                        className={`p-4 rounded-xl shadow-sm border-2 transition duration-300
                                            ${selectedSlot && selectedSlot.id === slot.id
                                                ? 'border-amber-500 bg-amber-50 text-blue-900'
                                                : slot.available
                                                ? 'border-blue-200 bg-white hover:bg-blue-100 text-blue-800'
                                                : 'border-red-200 bg-gray-100 text-gray-500 cursor-not-allowed opacity-70'
                                            }`}
                                    >
                                        <p className="font-bold text-lg">{slot.name}</p>
                                        <p className="text-sm">Price: ₹{slot.price}</p>
                                        <p className={`text-sm ${slot.available ? 'text-green-600' : 'text-red-600'}`}>
                                            {slot.available ? t.available : t.occupied}
                                        </p>
                                    </button>
                                ))}
                            </div>
                        </section>

                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <h3 className="text-2xl font-bold text-blue-800 mb-4">Add-ons</h3>
                            <label className="flex items-center space-x-3 cursor-pointer">
                                <input
                                    type="checkbox"
                                    checked={carWash}
                                    onChange={(e) => setCarWash(e.target.checked)}
                                    className="form-checkbox h-5 w-5 text-blue-600 rounded"
                                />
                                <span className="text-lg text-blue-900">{t.carWashAddon}</span>
                            </label>
                        </section>

                        <button
                            onClick={handleProceedToBooking}
                            className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                        >
                            {t.proceedToBooking}
                        </button>

                        <button
                            onClick={() => onNavigate('customerDashboard')}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                        >
                            Back to Search
                        </button>
                    </div>
                </main>
            );
        };

        // Booking Summary Screen
        const BookingSummaryScreen = ({ onNavigate, bookingDetails, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];

            if (!bookingDetails || !bookingDetails.selectedSlot) {
                return (
                    <main className="p-4 bg-white min-h-[calc(100vh-160px)] flex items-center justify-center">
                        <div className="text-center text-blue-800 text-lg">
                            <p>{t.noBookingDetails}</p>
                            <button
                                onClick={() => onNavigate('customerDashboard')}
                                className="mt-4 bg-blue-600 text-white font-bold py-2 px-4 rounded-xl hover:bg-blue-700 transition duration-300"
                            >
                                Start New Booking
                            </button>
                        </div>
                    </main>
                );
            }

            const { selectedSpot, selectedSlot, carWash } = bookingDetails;
            const basePrice = selectedSlot.price;
            const carWashPrice = carWash ? 150 : 0;
            const localTaxRate = 10; // 10%
            const taxableAmount = basePrice + carWashPrice;
            const localTax = taxableAmount * (localTaxRate / 100);
            const totalAmount = taxableAmount + localTax;

            const handleConfirmBooking = () => {
                showModal(t.bookingConfirmed, t.proceedingToPayment);
                setTimeout(() => {
                    onNavigate('paymentScreen', { totalAmount, bookingDetails });
                }, 1500);
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-xl mx-auto bg-blue-50 p-6 rounded-2xl shadow-lg border border-blue-200">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.bookingSummary}</h2>

                        <div className="space-y-3 text-blue-800 text-lg mb-6">
                            <div className="flex justify-between">
                                <span>{t.parkingSlot}:</span>
                                <span className="font-semibold">{selectedSpot.name} - {selectedSlot.name}</span>
                            </div>
                            <div className="flex justify-between">
                                <span>{t.basePrice}:</span>
                                <span className="font-semibold">₹{basePrice.toFixed(2)}</span>
                            </div>
                            <div className="flex justify-between">
                                <span>{t.carWash}:</span>
                                <span className="font-semibold">{carWash ? `₹${carWashPrice.toFixed(2)}` : 'N/A'}</span>
                            </div>
                            <div className="flex justify-between border-t border-blue-200 pt-3">
                                <span>{t.localParkingTax(localTaxRate)}</span>
                                <span className="font-semibold">₹{localTax.toFixed(2)}</span>
                            </div>
                            <div className="flex justify-between text-xl font-bold text-amber-600 border-t-2 border-blue-300 pt-4 mt-4">
                                <span>{t.totalAmount}</span>
                                <span>₹{totalAmount.toFixed(2)}</span>
                            </div>
                        </div>

                        <button
                            onClick={handleConfirmBooking}
                            className="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg"
                        >
                            {t.confirmBooking}
                        </button>
                        <button
                            onClick={() => onNavigate('slotSelection', { selectedSpot })}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                        >
                            Back to Slot Selection
                        </button>
                    </div>
                </main>
            );
        };

        // Payment Screen
        const PaymentScreen = ({ onNavigate, paymentDetails, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [paymentProcessing, setPaymentProcessing] = React.useState(false);
            const [paymentMethod, setPaymentMethod] = React.useState('upi'); // 'upi' or 'corporate'

            if (!paymentDetails || !paymentDetails.totalAmount) {
                return (
                    <main className="p-4 bg-white min-h-[calc(100vh-160px)] flex items-center justify-center">
                        <div className="text-center text-blue-800 text-lg">
                            <p>{t.noBookingDetails}</p>
                            <button
                                onClick={() => onNavigate('customerDashboard')}
                                className="mt-4 bg-blue-600 text-white font-bold py-2 px-4 rounded-xl hover:bg-blue-700 transition duration-300"
                            >
                                Start New Booking
                            </button>
                        </div>
                    </main>
                );
            }

            const { totalAmount, bookingDetails } = paymentDetails;

            const handlePayment = async () => {
                setPaymentProcessing(true);
                showModal(t.processingPayment, paymentMethod === 'upi' ? t.simulatingUpiPayment : t.requestSentToCorporate);

                // Simulate payment processing
                await new Promise(resolve => setTimeout(resolve, 3000));

                setPaymentProcessing(false);
                if (paymentMethod === 'upi') {
                    showModal(t.paymentSuccessful, t.paidViaUPI(totalAmount.toFixed(2)));
                    onNavigate('qrCheckin', { invoiceId: generateId(), bookingDetails, totalAmount });
                } else {
                    // Corporate billing success
                    showModal(t.paymentSuccessful, t.requestSentToCorporate);
                    onNavigate('qrCheckin', { invoiceId: generateId(), bookingDetails, totalAmount, corporate: true });
                }
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-xl mx-auto bg-blue-50 p-6 rounded-2xl shadow-lg border border-blue-200">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.completePayment}</h2>

                        <div className="text-center mb-6">
                            <p className="text-blue-800 text-2xl font-semibold">{t.amountDue}</p>
                            <p className="text-amber-600 text-5xl font-bold">₹{totalAmount.toFixed(2)}</p>
                        </div>

                        <div className="space-y-4 mb-6">
                            <button
                                onClick={() => setPaymentMethod('upi')}
                                className={`w-full py-3 px-6 rounded-xl font-bold transition duration-300 shadow-lg
                                    ${paymentMethod === 'upi' ? 'bg-purple-600 text-white' : 'bg-white text-purple-800 border border-purple-300 hover:bg-purple-100'}`}
                            >
                                {t.payWithUPI}
                            </button>
                            <button
                                onClick={() => setPaymentMethod('corporate')}
                                className={`w-full py-3 px-6 rounded-xl font-bold transition duration-300 shadow-lg
                                    ${paymentMethod === 'corporate' ? 'bg-purple-600 text-white' : 'bg-white text-purple-800 border border-purple-300 hover:bg-purple-100'}`}
                            >
                                {t.corporateBilling}
                            </button>
                        </div>

                        <p className="text-center text-blue-600 text-sm mb-6">{t.paymentProcessedSecurely}</p>

                        <button
                            onClick={handlePayment}
                            disabled={paymentProcessing}
                            className="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg"
                        >
                            {paymentProcessing ? 'Processing...' : `Pay ₹${totalAmount.toFixed(2)}`}
                        </button>
                        <button
                            onClick={() => onNavigate('bookingSummary', bookingDetails)}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                        >
                            Back to Summary
                        </button>
                    </div>
                </main>
            );
        };

        // QR Check-in Screen / Invoice
        const QrCheckinScreen = ({ onNavigate, invoiceDetails, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];

            if (!invoiceDetails || !invoiceDetails.bookingDetails) {
                return (
                    <main className="p-4 bg-white min-h-[calc(100vh-160px)] flex items-center justify-center">
                        <div className="text-center text-blue-800 text-lg">
                            <p>{t.noInvoiceAvailable}</p>
                            <button
                                onClick={() => onNavigate('customerDashboard')}
                                className="mt-4 bg-blue-600 text-white font-bold py-2 px-4 rounded-xl hover:bg-blue-700 transition duration-300"
                            >
                                Start New Booking
                            </button>
                        </div>
                    </main>
                );
            }

            const { selectedSpot, selectedSlot, carWash } = invoiceDetails.bookingDetails;
            const basePrice = selectedSlot.price;
            const carWashPrice = carWash ? 150 : 0;
            const localTaxRate = 10; // 10%
            const gstRate = 18; // 18% GST
            const taxableAmount = basePrice + carWashPrice;
            const localTax = taxableAmount * (localTaxRate / 100);
            const gstAmount = taxableAmount * (gstRate / 100);
            const totalAmountDue = taxableAmount + localTax + gstAmount;

            const handleStartNewBooking = () => {
                showModal(t.thankYou, t.parkingExperienceComplete);
                setTimeout(() => {
                    onNavigate('customerDashboard');
                }, 1500);
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-xl mx-auto bg-blue-50 p-6 rounded-2xl shadow-lg border border-blue-200">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.qrCheckinCode}</h2>

                        <div className="bg-white p-6 rounded-xl shadow-md text-center mb-6 border border-blue-100">
                            <div className="w-48 h-48 bg-gray-200 mx-auto flex items-center justify-center rounded-lg mb-4 text-gray-500 font-bold text-xl">
                                {/* Placeholder for QR Code */}
                                QR CODE
                            </div>
                            <p className="text-blue-800 text-lg font-semibold">{t.scanCodeForEntry}</p>
                        </div>

                        <h3 className="text-2xl font-bold text-blue-800 mb-4 text-center">{t.invoiceDetails}</h3>
                        <div className="space-y-2 text-blue-800 text-base mb-6">
                            <div className="flex justify-between">
                                <span>{t.invoiceID}:</span>
                                <span className="font-semibold">{invoiceDetails.invoiceId}</span>
                            </div>
                            <div className="flex justify-between">
                                <span>{t.date}:</span>
                                <span className="font-semibold">{new Date().toLocaleDateString()}</span>
                            </div>
                            <div className="flex justify-between">
                                <span>{t.service}:</span>
                                <span className="font-semibold">{selectedSpot.name} - {selectedSlot.name}</span>
                            </div>
                            <div className="flex justify-between">
                                <span>{t.addOn}:</span>
                                <span className="font-semibold">{carWash ? t.carWash : 'None'}</span>
                            </div>
                            <div className="flex justify-between border-t border-blue-200 pt-2">
                                <span>{t.basePrice}:</span>
                                <span className="font-semibold">₹{basePrice.toFixed(2)}</span>
                            </div>
                            {carWash && (
                                <div className="flex justify-between">
                                    <span>{t.carWash}:</span>
                                    <span className="font-semibold">₹{carWashPrice.toFixed(2)}</span>
                                </div>
                            )}
                            <div className="flex justify-between">
                                <span>{t.taxableAmount}:</span>
                                <span className="font-semibold">₹{taxableAmount.toFixed(2)}</span>
                            </div>
                            <div className="flex justify-between">
                                <span>{t.localParkingTax(localTaxRate)}</span>
                                <span className="font-semibold">₹{localTax.toFixed(2)}</span>
                            </div>
                            <div className="flex justify-between">
                                <span>{t.gst(gstRate)}</span>
                                <span className="font-semibold">₹{gstAmount.toFixed(2)}</span>
                            </div>
                            <div className="flex justify-between text-xl font-bold text-amber-600 border-t-2 border-blue-300 pt-4 mt-4">
                                <span>{t.totalAmountDue}</span>
                                <span>₹{totalAmountDue.toFixed(2)}</span>
                            </div>
                        </div>

                        <button
                            onClick={handleStartNewBooking}
                            className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                        >
                            {t.startNewBooking}
                        </button>
                    </div>
                </main>
            );
        };

        // My Bookings Screen
        const MyBookingsScreen = ({ onNavigate }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [bookings, setBookings] = React.useState([
                { id: generateId(), location: "City Center Parking", date: "2025-07-01", time: "10:00 AM", status: "Confirmed" },
                { id: generateId(), location: "Mall Parking (Premium)", date: "2025-06-25", time: "02:30 PM", status: "Completed" },
            ]);

            const handleRepeatBooking = (booking) => {
                // Simulate repeating a booking
                alert(`Repeating booking for ${booking.location}`);
                // In a real app, this would navigate to booking flow with pre-filled details
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-4xl mx-auto">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.myBookings}</h2>

                        {bookings.length === 0 ? (
                            <p className="text-center text-blue-800 text-lg">{t.noBookingsYet}</p>
                        ) : (
                            <div className="space-y-4">
                                {bookings.map(booking => (
                                    <div key={booking.id} className="bg-blue-50 p-6 rounded-2xl shadow-lg border border-blue-200 flex justify-between items-center">
                                        <div>
                                            <p className="text-xl font-semibold text-blue-900">{booking.location}</p>
                                            <p className="text-blue-700">{booking.date} at {booking.time}</p>
                                            <p className={`font-bold ${booking.status === 'Confirmed' ? 'text-green-600' : 'text-gray-600'}`}>
                                                {t.status} {booking.status}
                                            </p>
                                        </div>
                                        <button
                                            onClick={() => handleRepeatBooking(booking)}
                                            className="bg-blue-600 text-white font-bold py-2 px-4 rounded-xl hover:bg-blue-700 transition duration-300"
                                        >
                                            {t.repeatBooking}
                                        </button>
                                    </div>
                                ))}
                            </div>
                        )}
                        <button
                            onClick={() => onNavigate('customerDashboard')}
                            className="mt-8 w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                        >
                            Back to Dashboard
                        </button>
                    </div>
                </main>
            );
        };

        // Car Wash Screen
        const CarWashScreen = ({ onNavigate, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [carModel, setCarModel] = React.useState('');
            const [carCompany, setCarCompany] = React.useState('');
            const [location, setLocation] = React.useState('');
            const [dateTime, setDateTime] = React.useState('');

            const handleSchedule = (e) => {
                e.preventDefault();
                if (carModel && carCompany && location && dateTime) {
                    showModal(t.bookingScheduled, "Car Wash Scheduled!");
                    onNavigate('customerDashboard');
                } else {
                    showModal(t.registrationFailed, t.pleaseFillAllFields);
                }
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-xl mx-auto bg-blue-50 p-6 rounded-2xl shadow-lg border border-blue-200">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.carWashService}</h2>
                        <form onSubmit={handleSchedule} className="space-y-4">
                            <div>
                                <label htmlFor="car-model" className="block text-blue-800 text-sm font-bold mb-2">{t.carModel}</label>
                                <input
                                    type="text"
                                    id="car-model"
                                    value={carModel}
                                    onChange={(e) => setCarModel(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="e.g., Sedan, SUV"
                                    aria-label={t.carModel}
                                />
                            </div>
                            <div>
                                <label htmlFor="car-company" className="block text-blue-800 text-sm font-bold mb-2">{t.carCompany}</label>
                                <input
                                    type="text"
                                    id="car-company"
                                    value={carCompany}
                                    onChange={(e) => setCarCompany(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="e.g., Toyota, Honda"
                                    aria-label={t.carCompany}
                                />
                            </div>
                            <div>
                                <label htmlFor="wash-location" className="block text-blue-800 text-sm font-bold mb-2">{t.location}</label>
                                <input
                                    type="text"
                                    id="wash-location"
                                    value={location}
                                    onChange={(e) => setLocation(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="e.g., Parking Spot A1"
                                    aria-label={t.location}
                                />
                            </div>
                            <div>
                                <label htmlFor="wash-datetime" className="block text-blue-800 text-sm font-bold mb-2">Date & Time</label>
                                <input
                                    type="datetime-local"
                                    id="wash-datetime"
                                    value={dateTime}
                                    onChange={(e) => setDateTime(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    aria-label="Date and Time"
                                />
                            </div>
                            <button
                                type="submit"
                                className="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg"
                            >
                                {t.scheduleBooking}
                            </button>
                        </form>
                        <button
                            onClick={() => onNavigate('customerDashboard')}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                        >
                            Back to Dashboard
                        </button>
                    </div>
                </main>
            );
        };

        // Vehicle Maintenance Screen
        const VehicleMaintenanceScreen = ({ onNavigate, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [carModel, setCarModel] = React.useState('');
            const [carCompany, setCarCompany] = React.useState('');
            const [maintenanceType, setMaintenanceType] = React.useState('');
            const [location, setLocation] = React.useState('');
            const [dateTime, setDateTime] = React.useState('');

            const handleSchedule = (e) => {
                e.preventDefault();
                if (carModel && carCompany && maintenanceType && location && dateTime) {
                    showModal(t.bookingScheduled, "Maintenance Scheduled!");
                    onNavigate('customerDashboard');
                } else {
                    showModal(t.registrationFailed, t.pleaseFillAllFields);
                }
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-xl mx-auto bg-blue-50 p-6 rounded-2xl shadow-lg border border-blue-200">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.vehicleMaintenance}</h2>
                        <form onSubmit={handleSchedule} className="space-y-4">
                            <div>
                                <label htmlFor="m-car-model" className="block text-blue-800 text-sm font-bold mb-2">{t.carModel}</label>
                                <input
                                    type="text"
                                    id="m-car-model"
                                    value={carModel}
                                    onChange={(e) => setCarModel(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="e.g., Sedan, SUV"
                                    aria-label={t.carModel}
                                />
                            </div>
                            <div>
                                <label htmlFor="m-car-company" className="block text-blue-800 text-sm font-bold mb-2">{t.carCompany}</label>
                                <input
                                    type="text"
                                    id="m-car-company"
                                    value={carCompany}
                                    onChange={(e) => setCarCompany(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="e.g., Toyota, Honda"
                                    aria-label={t.carCompany}
                                />
                            </div>
                            <div>
                                <label htmlFor="maintenance-type" className="block text-blue-800 text-sm font-bold mb-2">{t.maintenanceType}</label>
                                <select
                                    id="maintenance-type"
                                    value={maintenanceType}
                                    onChange={(e) => setMaintenanceType(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    aria-label={t.selectMaintenance}
                                >
                                    <option value="">{t.selectMaintenance}</option>
                                    <option value="oilChange">{t.oilChange}</option>
                                    <option value="tireRotation">{t.tireRotation}</option>
                                    <option value="brakeInspection">{t.brakeInspection}</option>
                                    <option value="fullService">{t.fullService}</option>
                                    <option value="other">{t.other}</option>
                                </select>
                            </div>
                            <div>
                                <label htmlFor="m-location" className="block text-blue-800 text-sm font-bold mb-2">{t.location}</label>
                                <input
                                    type="text"
                                    id="m-location"
                                    value={location}
                                    onChange={(e) => setLocation(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="e.g., Parking Spot A1"
                                    aria-label={t.location}
                                />
                            </div>
                            <div>
                                <label htmlFor="m-datetime" className="block text-blue-800 text-sm font-bold mb-2">Date & Time</label>
                                <input
                                    type="datetime-local"
                                    id="m-datetime"
                                    value={dateTime}
                                    onChange={(e) => setDateTime(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    aria-label="Date and Time"
                                />
                            </div>
                            <button
                                type="submit"
                                className="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg"
                            >
                                {t.scheduleBooking}
                            </button>
                        </form>
                        <button
                            onClick={() => onNavigate('customerDashboard')}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                        >
                            Back to Dashboard
                        </button>
                    </div>
                </main>
            );
        };

        // Valet Parking Screen
        const ValetParkingScreen = ({ onNavigate, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [pickUpLocation, setPickUpLocation] = React.useState('');
            const [dropOffLocation, setDropOffLocation] = React.useState('');
            const [dateTime, setDateTime] = React.useState('');

            const handleBookValet = (e) => {
                e.preventDefault();
                if (pickUpLocation && dropOffLocation && dateTime) {
                    showModal(t.valetBooked, "Valet service booked successfully!");
                    onNavigate('customerDashboard');
                } else {
                    showModal(t.registrationFailed, t.pleaseFillAllFields);
                }
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-xl mx-auto bg-blue-50 p-6 rounded-2xl shadow-lg border border-blue-200">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.valetBooking}</h2>
                        <form onSubmit={handleBookValet} className="space-y-4">
                            <div>
                                <label htmlFor="pickup-location" className="block text-blue-800 text-sm font-bold mb-2">{t.pickUpLocation}</label>
                                <input
                                    type="text"
                                    id="pickup-location"
                                    value={pickUpLocation}
                                    onChange={(e) => setPickUpLocation(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="e.g., Current Location, Office"
                                    aria-label={t.pickUpLocation}
                                />
                            </div>
                            <div>
                                <label htmlFor="dropoff-location" className="block text-blue-800 text-sm font-bold mb-2">{t.dropOffLocation}</label>
                                <input
                                    type="text"
                                    id="dropoff-location"
                                    value={dropOffLocation}
                                    onChange={(e) => setDropOffLocation(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="e.g., Home, Parking Spot B5"
                                    aria-label={t.dropOffLocation}
                                />
                            </div>
                            <div>
                                <label htmlFor="valet-datetime" className="block text-blue-800 text-sm font-bold mb-2">Date & Time</label>
                                <input
                                    type="datetime-local"
                                    id="valet-datetime"
                                    value={dateTime}
                                    onChange={(e) => setDateTime(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    aria-label="Date and Time"
                                />
                            </div>
                            <button
                                type="submit"
                                className="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg"
                            >
                                {t.bookValetService}
                            </button>
                        </form>
                        <button
                            onClick={() => onNavigate('customerDashboard')}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                        >
                            Back to Dashboard
                        </button>
                    </div>
                </main>
            );
        };

        // Advanced Pre-Booking Screen
        const AdvancedPreBookingScreen = ({ onNavigate, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [location, setLocation] = React.useState('');
            const [date, setDate] = React.useState('');
            const [timeFrom, setTimeFrom] = React.useState('');
            const [timeTo, setTimeTo] = React.useState('');

            const handlePrebook = (e) => {
                e.preventDefault();
                if (location && date && timeFrom && timeTo) {
                    showModal(t.prebookSubmitted, " ");
                    onNavigate('customerDashboard');
                } else {
                    showModal(t.registrationFailed, t.pleaseFillAllFields);
                }
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-xl mx-auto bg-blue-50 p-6 rounded-2xl shadow-lg border border-blue-200">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.prebookAdvanced}</h2>
                        <form onSubmit={handlePrebook} className="space-y-4">
                            <div>
                                <label htmlFor="prebook-location" className="block text-blue-800 text-sm font-bold mb-2">{t.location}</label>
                                <input
                                    type="text"
                                    id="prebook-location"
                                    value={location}
                                    onChange={(e) => setLocation(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="e.g., City Center"
                                    aria-label={t.location}
                                />
                            </div>
                            <div>
                                <label htmlFor="prebook-date" className="block text-blue-800 text-sm font-bold mb-2">{t.date}</label>
                                <input
                                    type="date"
                                    id="prebook-date"
                                    value={date}
                                    onChange={(e) => setDate(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    aria-label={t.date}
                                />
                            </div>
                            <div className="flex space-x-4">
                                <div className="flex-1">
                                    <label htmlFor="prebook-time-from" className="block text-blue-800 text-sm font-bold mb-2">{t.timeFrom}</label>
                                    <input
                                        type="time"
                                        id="prebook-time-from"
                                        value={timeFrom}
                                        onChange={(e) => setTimeFrom(e.target.value)}
                                        className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                        aria-label={t.timeFrom}
                                    />
                                </div>
                                <div className="flex-1">
                                    <label htmlFor="prebook-time-to" className="block text-blue-800 text-sm font-bold mb-2">{t.timeTo}</label>
                                    <input
                                        type="time"
                                        id="prebook-time-to"
                                        value={timeTo}
                                        onChange={(e) => setTimeTo(e.target.value)}
                                        className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                        aria-label={t.timeTo}
                                    />
                                </div>
                            </div>
                            <button
                                type="submit"
                                className="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg"
                            >
                                {t.confirmPrebook}
                            </button>
                        </form>
                        <button
                            onClick={() => onNavigate('customerDashboard')}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                        >
                            Back to Dashboard
                        </button>
                    </div>
                </main>
            );
        };

        // About Us Screen
        const AboutUsScreen = ({ onNavigate }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-4xl mx-auto bg-blue-50 p-6 rounded-2xl shadow-lg border border-blue-200">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.aboutUs}</h2>
                        <p className="text-blue-800 text-lg leading-relaxed whitespace-pre-wrap">
                            {t.aboutUsContent}
                        </p>
                        <p className="text-blue-600 text-sm mt-6 text-center italic">
                            {t.disclaimer}
                        </p>
                        <button
                            onClick={() => onNavigate('customerDashboard')}
                            className="mt-8 w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                        >
                            Back to Dashboard
                        </button>
                    </div>
                </main>
            );
        };

        // Customer Settings Screen
        const CustomerSettingsScreen = ({ onNavigate, showModal, onLogout }) => {
            const { appLanguage, setAppLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];

            const handleDeleteAccount = () => {
                showModal(t.confirmDeletion, t.areYouSureDeleteAccount, () => {
                    // Simulate account deletion
                    showModal(t.accountDeleted, t.accountDeletedMessage);
                    onLogout(); // Log out after deletion
                });
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-4xl mx-auto bg-blue-50 p-6 rounded-2xl shadow-lg border border-blue-200">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.appSettings}</h2>

                        <section className="space-y-6">
                            {/* Language & Region */}
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100">
                                <h3 className="text-xl font-bold text-blue-800 mb-2">{t.languageRegion}</h3>
                                <p className="text-blue-700 mb-3">{t.currentLanguage(appLanguage === 'en' ? 'English' : 'हिंदी')}</p>
                                <select
                                    value={appLanguage}
                                    onChange={(e) => setAppLanguage(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                >
                                    <option value="en">English</option>
                                    <option value="hi">हिंदी</option>
                                </select>
                            </div>

                            {/* Family Sharing */}
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100">
                                <h3 className="text-xl font-bold text-blue-800 mb-2">{t.familySharing}</h3>
                                <p className="text-blue-700 mb-3">{t.shareSubscription}</p>
                                <button
                                    onClick={() => showModal(t.manageFamily, t.familySharingInitiated)}
                                    className="bg-blue-600 text-white font-bold py-2 px-4 rounded-xl hover:bg-blue-700 transition duration-300"
                                >
                                    {t.manageFamily}
                                </button>
                            </div>

                            {/* Emergency Services */}
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100">
                                <h3 className="text-xl font-bold text-blue-800 mb-2">{t.emergencyServices}</h3>
                                <p className="text-blue-700 mb-3">{t.requestAssistance}</p>
                                <button
                                    onClick={() => showModal(t.requestJumpStart, t.jumpStartRequested)}
                                    className="bg-red-600 text-white font-bold py-2 px-4 rounded-xl hover:bg-red-700 transition duration-300"
                                >
                                    {t.requestJumpStart}
                                </button>
                            </div>

                            {/* Data & Privacy (GDPR) */}
                            <div className="bg-white p-4 rounded-xl shadow-sm border border-blue-100">
                                <h3 className="text-xl font-bold text-blue-800 mb-2">{t.dataPrivacy}</h3>
                                <p className="text-blue-700 mb-3">{t.exerciseRightToDelete}</p>
                                <button
                                    onClick={handleDeleteAccount}
                                    className="bg-red-600 text-white font-bold py-2 px-4 rounded-xl hover:bg-red-700 transition duration-300"
                                >
                                    {t.deleteMyAccount}
                                </button>
                            </div>
                        </section>

                        <button
                            onClick={() => onNavigate('customerDashboard')}
                            className="mt-8 w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                        >
                            Back to Dashboard
                        </button>
                    </div>
                </main>
            );
        };


        // --- Customer App Component ---
        const CustomerApp = ({ onLogout, onBackToUserTypeSelection }) => {
            const [currentScreen, setCurrentScreen] = React.useState('login'); // 'login', 'register', 'forgotPassword', 'customerDashboard', 'slotSelection', 'bookingSummary', 'paymentScreen', 'qrCheckin', 'myBookings', 'carWash', 'vehicleMaintenance', 'valetParking', 'prebookAdvanced', 'settings', 'aboutUs'
            const [modal, setModal] = React.useState({ show: false, title: '', message: '', onConfirm: null });
            const [bookingDetails, setBookingDetails] = React.useState(null); // To pass data between screens

            const showModal = (title, message, onConfirm = null) => {
                setModal({ show: true, title, message, onConfirm });
            };

            const closeModal = () => {
                setModal({ show: false, title: '', message: '', onConfirm: null });
                if (modal.onConfirm) {
                    modal.onConfirm(); // Execute confirm action if present
                }
            };

            const handleNavigate = (screen, data = null) => {
                if (screen === 'slotSelection' || screen === 'bookingSummary' || screen === 'paymentScreen' || screen === 'qrCheckin') {
                    setBookingDetails(data);
                }
                setCurrentScreen(screen);
            };

            const renderScreen = () => {
                switch (currentScreen) {
                    case 'login':
                        return <CustomerLoginScreen onLoginSuccess={() => handleNavigate('customerDashboard')} onRegisterClick={() => handleNavigate('register')} onForgotPasswordClick={() => handleNavigate('forgotPassword')} onBackToUserTypeSelection={onBackToUserTypeSelection} showModal={showModal} />;
                    case 'register':
                        return <RegistrationScreen onRegisterSuccess={() => handleNavigate('login')} onLoginClick={() => handleNavigate('login')} onBackToUserTypeSelection={onBackToUserTypeSelection} showModal={showModal} />;
                    case 'forgotPassword':
                        return <ForgotPasswordScreen onBackToLogin={() => handleNavigate('login')} showModal={showModal} />;
                    case 'customerDashboard':
                        return <CustomerDashboard onNavigate={handleNavigate} showModal={showModal} />;
                    case 'slotSelection':
                        return <SlotSelectionScreen onNavigate={handleNavigate} selectedSpot={bookingDetails?.spot} showModal={showModal} />;
                    case 'bookingSummary':
                        return <BookingSummaryScreen onNavigate={handleNavigate} bookingDetails={bookingDetails} showModal={showModal} />;
                    case 'paymentScreen':
                        return <PaymentScreen onNavigate={handleNavigate} paymentDetails={bookingDetails} showModal={showModal} />;
                    case 'qrCheckin':
                        return <QrCheckinScreen onNavigate={handleNavigate} invoiceDetails={bookingDetails} showModal={showModal} />;
                    case 'myBookings':
                        return <MyBookingsScreen onNavigate={handleNavigate} />;
                    case 'carWash':
                        return <CarWashScreen onNavigate={handleNavigate} showModal={showModal} />;
                    case 'vehicleMaintenance':
                        return <VehicleMaintenanceScreen onNavigate={handleNavigate} showModal={showModal} />;
                    case 'valetParking':
                        return <ValetParkingScreen onNavigate={handleNavigate} showModal={showModal} />;
                    case 'prebookAdvanced':
                        return <AdvancedPreBookingScreen onNavigate={handleNavigate} showModal={showModal} />;
                    case 'settings':
                        return <CustomerSettingsScreen onNavigate={handleNavigate} showModal={showModal} onLogout={onLogout} />;
                    case 'aboutUs':
                        return <AboutUsScreen onNavigate={handleNavigate} />;
                    default:
                        return <CustomerLoginScreen onLoginSuccess={() => handleNavigate('customerDashboard')} onRegisterClick={() => handleNavigate('register')} onForgotPasswordClick={() => handleNavigate('forgotPassword')} onBackToUserTypeSelection={onBackToUserTypeSelection} showModal={showModal} />;
                }
            };

            const showHeaderAndFooter = currentScreen !== 'login' && currentScreen !== 'register' && currentScreen !== 'forgotPassword';
            const showLogoutButton = currentScreen !== 'login' && currentScreen !== 'register' && currentScreen !== 'forgotPassword';

            return (
                <div className="min-h-screen flex flex-col">
                    {showHeaderAndFooter && <Header onNavigate={handleNavigate} onLogout={onLogout} showLogout={showLogoutButton} />}
                    {renderScreen()}
                    {showHeaderAndFooter && <Footer />}
                    <Modal
                        show={modal.show}
                        title={modal.title}
                        message={modal.message}
                        onClose={closeModal}
                    />
                </div>
            );
        };


        // --- Service Provider App Screens ---

        // Service Provider Login Screen
        const ServiceProviderLoginScreen = ({ onLoginSuccess, onRegisterClick, onBackToUserTypeSelection, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [username, setUsername] = React.useState('');
            const [password, setPassword] = React.useState('');

            const handleLogin = (e) => {
                e.preventDefault();
                // Simple mock authentication for provider
                if (username === 'provider' && password === 'password') {
                    showModal(t.loginSuccessful, t.welcomeProvider);
                    onLoginSuccess();
                } else {
                    showModal(t.loginFailed, t.invalidCredentials);
                }
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-[calc(100vh-160px)] p-4 bg-white text-blue-900">
                    <div className="bg-blue-50 rounded-2xl p-8 shadow-xl max-w-md w-full border border-blue-200">
                        <h2 className="text-3xl font-bold text-amber-600 mb-6 text-center">{t.providerLogin}</h2>
                        <form onSubmit={handleLogin} className="space-y-4">
                            <div>
                                <label htmlFor="provider-username" className="block text-blue-800 text-sm font-bold mb-2">{t.username}</label>
                                <input
                                    type="text"
                                    id="provider-username"
                                    value={username}
                                    onChange={(e) => setUsername(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="provider"
                                    aria-label={t.username}
                                />
                            </div>
                            <div>
                                <label htmlFor="provider-password" className="block text-blue-800 text-sm font-bold mb-2">{t.password}</label>
                                <input
                                    type="password"
                                    id="provider-password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="password"
                                    aria-label={t.password}
                                />
                            </div>
                            <button
                                type="submit"
                                className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                                aria-label={t.login}
                            >
                                {t.login}
                            </button>
                        </form>
                        <button
                            onClick={onRegisterClick}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                            aria-label={t.registerAsProvider}
                        >
                            {t.registerAsProvider}
                        </button>
                        <button
                            onClick={onBackToUserTypeSelection}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                            aria-label={t.backToUserTypeSelection}
                        >
                            {t.backToUserTypeSelection}
                        </button>
                    </div>
                </div>
            );
        };

        // Service Provider Registration Screen
        const ServiceProviderRegistrationScreen = ({ onRegisterSuccess, onLoginClick, onBackToUserTypeSelection, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [name, setName] = React.useState('');
            const [email, setEmail] = React.useState('');
            const [password, setPassword] = React.useState('');

            const handleRegister = (e) => {
                e.preventDefault();
                if (name && email && password) {
                    showModal(t.registrationSuccessful, "Provider registration successful!");
                    onRegisterSuccess();
                } else {
                    showModal(t.registrationFailed, t.pleaseFillAllFields);
                }
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-[calc(100vh-160px)] p-4 bg-white text-blue-900">
                    <div className="bg-blue-50 rounded-2xl p-8 shadow-xl max-w-md w-full border border-blue-200">
                        <h2 className="text-3xl font-bold text-amber-600 mb-6 text-center">{t.providerRegistration}</h2>
                        <form onSubmit={handleRegister} className="space-y-4">
                            <div>
                                <label htmlFor="provider-name" className="block text-blue-800 text-sm font-bold mb-2">{t.fullName}</label>
                                <input
                                    type="text"
                                    id="provider-name"
                                    value={name}
                                    onChange={(e) => setName(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="Service Provider Name"
                                    aria-label={t.fullName}
                                />
                            </div>
                            <div>
                                <label htmlFor="provider-email" className="block text-blue-800 text-sm font-bold mb-2">{t.email}</label>
                                <input
                                    type="email"
                                    id="provider-email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="provider@example.com"
                                    aria-label={t.email}
                                />
                            </div>
                            <div>
                                <label htmlFor="provider-password" className="block text-blue-800 text-sm font-bold mb-2">{t.password}</label>
                                <input
                                    type="password"
                                    id="provider-password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="w-full p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                    placeholder="********"
                                    aria-label={t.password}
                                />
                            </div>
                            <button
                                type="submit"
                                className="w-full bg-pink-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-pink-700 transition duration-300 shadow-lg"
                                aria-label={t.register}
                            >
                                {t.register}
                            </button>
                        </form>
                        <button
                            onClick={onLoginClick}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                            aria-label={t.login}
                        >
                            {t.login}
                        </button>
                        <button
                            onClick={onBackToUserTypeSelection}
                            className="mt-4 w-full text-blue-800 font-bold py-2 px-4 rounded-xl hover:bg-blue-100 transition duration-300"
                            aria-label={t.backToUserTypeSelection}
                        >
                            {t.backToUserTypeSelection}
                        </button>
                    </div>
                </div>
            );
        };

        // Service Provider Dashboard
        const ServiceProviderDashboard = ({ onNavigate, showModal }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];
            const [parkingSpots, setParkingSpots] = React.useState([
                { id: 'P101', type: 'Standard', status: 'Occupied' },
                { id: 'P102', type: 'Premium', status: 'Available' },
                { id: 'E201', type: 'EV Charging', status: 'Available' },
                { id: 'V301', type: 'Valet', status: 'Occupied' },
            ]);
            const [newSpotId, setNewSpotId] = React.useState('');
            const [newSpotType, setNewSpotType] = React.useState('Standard');

            const occupiedSpots = parkingSpots.filter(spot => spot.status === 'Occupied').length;
            const availableSpots = parkingSpots.filter(spot => spot.status === 'Available').length;

            const handleAddSpot = () => {
                if (newSpotId.trim() === '') {
                    showModal('Error', t.pleaseFillAllFields);
                    return;
                }
                if (parkingSpots.some(spot => spot.id === newSpotId)) {
                    showModal('Error', t.spotAlreadyExists(newSpotId));
                    return;
                }
                setParkingSpots([...parkingSpots, { id: newSpotId, type: newSpotType, status: 'Available' }]);
                showModal('Success', t.spotAdded(newSpotId));
                setNewSpotId('');
            };

            const handleRemoveSpot = (id) => {
                if (!parkingSpots.some(spot => spot.id === id)) {
                    showModal('Error', t.spotNotFound(id));
                    return;
                }
                setParkingSpots(parkingSpots.filter(spot => spot.id !== id));
                showModal('Success', t.spotRemoved(id));
            };

            return (
                <main className="p-4 bg-white min-h-[calc(100vh-160px)]">
                    <div className="max-w-4xl mx-auto">
                        <h2 className="text-4xl font-extrabold text-blue-900 mb-8 text-center">{t.dashboard}</h2>

                        {/* Current Occupancy */}
                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <h3 className="text-2xl font-bold text-blue-800 mb-4">{t.currentOccupancy}</h3>
                            <div className="flex justify-around text-center">
                                <div>
                                    <p className="text-5xl font-bold text-blue-900">{parkingSpots.length}</p>
                                    <p className="text-blue-700">{t.parkingSpots}</p>
                                </div>
                                <div>
                                    <p className="text-5xl font-bold text-red-600">{occupiedSpots}</p>
                                    <p className="text-blue-700">{t.occupiedSpots}</p>
                                </div>
                                <div>
                                    <p className="text-5xl font-bold text-green-600">{availableSpots}</p>
                                    <p className="text-blue-700">{t.availableSpots}</p>
                                </div>
                            </div>
                        </section>

                        {/* Manage Spots */}
                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <h3 className="text-2xl font-bold text-blue-800 mb-4">{t.manageSpots}</h3>
                            <div className="space-y-4">
                                {/* Add Spot */}
                                <div className="flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4">
                                    <input
                                        type="text"
                                        value={newSpotId}
                                        onChange={(e) => setNewSpotId(e.target.value)}
                                        className="flex-1 p-3 rounded-xl bg-blue-100 text-blue-900 placeholder-blue-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                        placeholder={t.spotId}
                                        aria-label={t.spotId}
                                    />
                                    <select
                                        value={newSpotType}
                                        onChange={(e) => setNewSpotType(e.target.value)}
                                        className="flex-1 p-3 rounded-xl bg-blue-100 text-blue-900 focus:outline-none focus:ring-2 focus:ring-amber-400"
                                        aria-label={t.spotType}
                                    >
                                        <option value="Standard">{t.standard}</option>
                                        <option value="Premium">{t.premiumSpot}</option>
                                        <option value="EV Charging">{t.evChargingSpot}</option>
                                        <option value="Valet">{t.valetSpot}</option>
                                    </select>
                                    <button
                                        onClick={handleAddSpot}
                                        className="bg-blue-600 text-white font-bold py-2 px-5 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg w-full md:w-auto"
                                    >
                                        {t.add}
                                    </button>
                                </div>

                                {/* List Spots */}
                                <div className="space-y-3 max-h-60 overflow-y-auto">
                                    {parkingSpots.map(spot => (
                                        <div key={spot.id} className="flex justify-between items-center bg-white p-3 rounded-xl shadow-sm border border-blue-100">
                                            <div>
                                                <p className="font-semibold text-blue-900">{spot.id} ({spot.type})</p>
                                                <p className={`text-sm ${spot.status === 'Available' ? 'text-green-600' : 'text-red-600'}`}>
                                                    {t.status} {spot.status}
                                                </p>
                                            </div>
                                            <button
                                                onClick={() => handleRemoveSpot(spot.id)}
                                                className="bg-red-500 text-white text-sm py-1 px-3 rounded-lg hover:bg-red-600 transition duration-300"
                                            >
                                                {t.remove}
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </section>

                        {/* Booking History */}
                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <h3 className="text-2xl font-bold text-blue-800 mb-4">{t.bookingHistory}</h3>
                            {/* This would be populated from a database in a real app */}
                            <p className="text-blue-700 text-center">{t.noBookingsYet}</p>
                        </section>

                        {/* Service Requests */}
                        <section className="bg-blue-50 p-6 rounded-2xl shadow-lg mb-8 border border-blue-200">
                            <h3 className="text-2xl font-bold text-blue-800 mb-4">{t.manageServiceRequests}</h3>
                            {/* This would be populated from a database in a real app */}
                            <p className="text-blue-700 text-center">{t.noServiceRequests}</p>
                        </section>
                    </div>
                </main>
            );
        };

        // --- Service Provider App Component ---
        const ServiceProviderApp = ({ onLogout, onBackToUserTypeSelection }) => {
            const [currentScreen, setCurrentScreen] = React.useState('login'); // 'login', 'register', 'dashboard'
            const [modal, setModal] = React.useState({ show: false, title: '', message: '', onConfirm: null });

            const showModal = (title, message, onConfirm = null) => {
                setModal({ show: true, title, message, onConfirm });
            };

            const closeModal = () => {
                setModal({ show: false, title: '', message: '', onConfirm: null });
                if (modal.onConfirm) {
                    modal.onConfirm();
                }
            };

            const handleNavigate = (screen) => {
                setCurrentScreen(screen);
            };

            const renderScreen = () => {
                switch (currentScreen) {
                    case 'login':
                        return <ServiceProviderLoginScreen onLoginSuccess={() => handleNavigate('dashboard')} onRegisterClick={() => handleNavigate('register')} onBackToUserTypeSelection={onBackToUserTypeSelection} showModal={showModal} />;
                    case 'register':
                        return <ServiceProviderRegistrationScreen onRegisterSuccess={() => handleNavigate('login')} onLoginClick={() => handleNavigate('login')} onBackToUserTypeSelection={onBackToUserTypeSelection} showModal={showModal} />;
                    case 'dashboard':
                        return <ServiceProviderDashboard onNavigate={handleNavigate} showModal={showModal} />;
                    default:
                        return <ServiceProviderLoginScreen onLoginSuccess={() => handleNavigate('dashboard')} onRegisterClick={() => handleNavigate('register')} onBackToUserTypeSelection={onBackToUserTypeSelection} showModal={showModal} />;
                }
            };

            const showHeaderAndFooter = currentScreen !== 'login' && currentScreen !== 'register';
            const showLogoutButton = currentScreen !== 'login' && currentScreen !== 'register';

            return (
                <div className="min-h-screen flex flex-col">
                    {showHeaderAndFooter && <Header onNavigate={handleNavigate} onLogout={onLogout} showLogout={showLogoutButton} />}
                    {renderScreen()}
                    {showHeaderAndFooter && <Footer />}
                    <Modal
                        show={modal.show}
                        title={modal.title}
                        message={modal.message}
                        onClose={closeModal}
                    />
                </div>
            );
        };

        // --- User Type Selection Screen ---
        const UserTypeSelectionScreen = ({ setUserType }) => {
            const { appLanguage } = React.useContext(LanguageContext);
            const t = translations[appLanguage];

            return (
                <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-800 p-4">
                    <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-lg w-full text-center transform transition-all duration-500 scale-100 hover:scale-105">
                        <div className="flex items-center justify-center mb-6">
                            <span className="text-blue-800 text-6xl font-black relative">
                                P
                                <span className="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-amber-400 text-3xl font-bold">
                                    &#x27A4;
                                </span>
                            </span>
                            <h1 className="text-5xl font-extrabold text-blue-900 ml-4">{t.appName}</h1>
                        </div>
                        <p className="text-blue-700 text-xl mb-8">{t.selectUserType}</p>
                        <div className="space-y-6">
                            <button
                                onClick={() => setUserType('customer')}
                                className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                            >
                                {t.customerApp}
                            </button>
                            <button
                                onClick={() => setUserType('provider')}
                                className="w-full bg-purple-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-purple-700 transition duration-300 shadow-lg"
                            >
                                {t.serviceProviderApp}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Main App Component ---
        function App() {
            const [userType, setUserType] = React.useState(null); // 'customer', 'provider', or null
            const [appLanguage, setAppLanguage] = React.useState('en'); // Default language

            const handleLogout = () => {
                setUserType(null); // Go back to user type selection
            };

            return (
                <LanguageContext.Provider value={{ appLanguage, setAppLanguage }}>
                    {userType === 'customer' && <CustomerApp key={appLanguage} onLogout={handleLogout} onBackToUserTypeSelection={handleLogout} />}
                    {userType === 'provider' && <ServiceProviderApp key={appLanguage} onLogout={handleLogout} onBackToUserTypeSelection={handleLogout} />}
                    {userType === null && <UserTypeSelectionScreen setUserType={setUserType} />}
                </LanguageContext.Provider>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
