<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartPark - Your Smart Parking Solution</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background-color: #f0f4f8; /* Light blue-gray background */
            min-height: 100vh; /* Ensure full viewport height */
            display: flex;
            flex-direction: column;
        }
        #root {
            flex-grow: 1; /* Allow the React app to take available space */
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Ensure the root div also takes full height */
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Your React App code goes here
        // Changed import statements to use global React object for browser compatibility
        const { useState, useEffect, createContext, useContext } = React;

        // --- Utility Functions ---
        const generateId = () => Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);

        // --- Language Context ---
        const LanguageContext = createContext();

        const translations = {
            en: {
                appName: "SmartPark",
                settings: "Settings",
                logout: "Logout",
                registerForSmartPark: "New User!! Register here....", // Updated text
                fullName: "Full Name",
                mobileNumber: "Mobile Number",
                email: "Email",
                password: "Password",
                register: "Register",
                registrationSuccessful: "Registration Successful!",
                welcomeToSmartPark: "Welcome to SmartPark! You can now search for parking spots.",
                registrationFailed: "Registration Failed",
                pleaseFillAllFields: "Please fill in all fields.",
                findYourParkingSpot: "Find Your Parking Spot",
                selectCity: "Select City",
                enterLocation: "Enter location or destination",
                search: "Search",
                poweredByAI: "Powered by Predictive Availability AI for optimal suggestions.",
                realTimeMapView: "Real-Time Map View",
                available: "Available",
                premium: "Premium",
                occupied: "Occupied",
                searchResults: "Search Results",
                searchingForParking: (loc) => `Searching for parking near "${loc}". Showing real-time availability.`,
                searchError: "Search Error",
                pleaseEnterLocation: "Please enter a location to search.",
                selectYourSlot: "Select Your Slot",
                pricesDynamicallyAdjusted: "Prices are dynamically adjusted based on demand.",
                slotSelected: "Slot Selected",
                youHaveSelected: (slotName, price) => `You have selected ${slotName}. Price: ₹${price}.`,
                selectionRequired: "Selection Required",
                pleaseSelectSlot: "Please select a parking slot first.",
                carWashAddon: "1-Tap Car Wash Add-on (₹150)",
                proceedToBooking: "Proceed to Booking",
                bookingSummary: "Booking Summary",
                noBookingDetails: "No booking details available. Please go back and select a slot.",
                parkingSlot: "Parking Slot",
                basePrice: "Base Price",
                carWash: "1-Tap Car Wash",
                localParkingTax: (rate) => `Local Parking Tax (${rate}%):`,
                totalAmount: "Total Amount:",
                confirmBooking: "Confirm Booking & Pay",
                bookingConfirmed: "Your booking is confirmed! Proceeding to payment.",
                completePayment: "Complete Payment",
                amountDue: "Amount Due:",
                payWithUPI: "Pay with UPI",
                corporateBilling: "Corporate Billing",
                paymentProcessedSecurely: "Your payment is processed securely with tokenization for PCI-DSS compliance.",
                processingPayment: "Processing Payment",
                simulatingUpiPayment: "Simulating UPI payment... Payment tokenized for PCI-DSS compliance.",
                paymentSuccessful: "Payment Successful!",
                paidViaUPI: (amount) => `₹${amount} paid via UPI. Your QR check-in code is ready.`,
                requestSentToCorporate: "Request sent to your corporate account for approval. Payment will be processed automatically.",
                invoiceDetails: "Invoice Details",
                noInvoiceAvailable: "No invoice available. Please complete a booking first.",
                invoiceID: "Invoice ID:",
                date: "Date:",
                service: "Service:",
                addOn: "Add-on:",
                taxableAmount: "Taxable Amount:",
                gst: (rate) => `GST (${rate}%):`,
                totalAmountDue: "Total Amount Due:",
                qrCheckinCode: "QR Check-in Code",
                scanCodeForEntry: "Scan this code at the parking gate for seamless entry and auto-checkout.",
                startNewBooking: "Start New Booking",
                thankYou: "Thank You!",
                parkingExperienceComplete: "Your parking experience is now complete. We look forward to serving you again!",
                appSettings: "App Settings",
                languageRegion: "Language & Region",
                currentLanguage: (lang) => `Current language: ${lang}`,
                familySharing: "Family Sharing",
                shareSubscription: "Share your SmartPark subscription benefits with your family members.",
                manageFamily: "Manage Family",
                familySharingInitiated: "Family sharing setup initiated. Invite members via email.",
                emergencyServices: "Emergency Services",
                requestAssistance: "Request emergency assistance directly from the app.",
                requestJumpStart: "Request Jump-Start",
                jumpStartRequested: "Emergency jump-start service requested. Our team is on the way!",
                dataPrivacy: "Data & Privacy (GDPR)",
                deleteMyAccount: "Delete My Account",
                exerciseRightToDelete: "Exercise your right to data deletion.",
                confirmDeletion: "Confirm Deletion",
                areYouSureDeleteAccount: "Are you sure you want to delete your account? This action is irreversible.",
                gdprDataRemoval: "In accordance with GDPR, all your personal data will be permanently removed.",
                accountDeleted: "Account Deleted",
                accountDeletedMessage: "Your account and all associated data have been permanently deleted as per GDPR compliance.",
                suggestedParkingLocations: "Suggested Parking Locations",
                bestParkingFor: (loc) => `Best Parking for "${loc}"`,
                regularUsedLocations: "Regularly Used Locations",
                location: "Location",
                distance: "Distance",
                availability: "Availability",
                services: "Services",
                carWashDetailing: "Car Wash & Detailing",
                getCarSparkling: "Get your car sparkling while parked.",
                evCharging: "EV Charging",
                findBookCharging: "Find and book charging stations.",
                vehicleMaintenance: "Vehicle Maintenance",
                minorServicing: "Minor servicing at your parking spot.",
                valetParking: "Valet Parking",
                hassleFreeParking: "Hassle-free parking and retrieval.",
                priorityBooking: "Priority Booking for Premium Users",
                premiumBenefits: "Enjoy guaranteed spots and exclusive access with a premium subscription.",
                dynamicPricing: "Dynamic Pricing Explained",
                pricingAdjusts: "Our prices adjust in real-time based on demand, ensuring fair rates.",
                corporateBillingBenefits: "Corporate Billing Benefits",
                streamlineExpenses: "Streamline parking expenses for your business with centralized billing.",
                evChargingLocator: "EV Charging Locator",
                findChargingStations: "Find nearby EV charging stations on the map.",
                locateCharging: "Locate Charging Stations",
                valetParkingService: "Valet Parking Service",
                bookValet: "Book a valet to park your car for ultimate convenience.",
                bookValetService: "Book Valet Service",
                carWashService: "Car Wash Service",
                scheduleCarWash: "Schedule a car wash and detailing while your car is parked.",
                scheduleService: "Schedule Service",
                nearbyAvailableSpots: "Nearby Available Spots",
                spotBookedSuccessfully: (spot) => `Spot at ${spot} booked successfully!`,
                automatedParkingBooked: "Automated parking spot booked successfully!",
                prebookAdvanced: "Advanced Pre-Booking",
                timeFrom: "Time From",
                timeTo: "To Time",
                confirmPrebook: "Confirm Pre-book",
                prebookSubmitted: "Your pre-booking request has been submitted. We'll notify you when a spot is confirmed!",
                myBookings: "My Bookings",
                status: "Status:",
                confirmed: "Confirmed",
                completed: "Completed",
                repeatBooking: "Repeat Booking",
                login: "Login",
                userLogin: "User Login",
                providerLogin: "Service Provider Login",
                username: "Username",
                loginFailed: "Login Failed",
                invalidCredentials: "Invalid credentials. Please try again.",
                welcomeProvider: "Welcome, Service Provider!",
                dashboard: "Dashboard",
                currentOccupancy: "Current Occupancy",
                parkingSpots: "Parking Spots",
                occupiedSpots: "Occupied Spots",
                availableSpots: "Available Spots",
                manageSpots: "Manage Spots",
                addSpot: "Add Spot",
                spotId: "Spot ID",
                spotType: "Spot Type",
                standard: "Standard",
                premiumSpot: "Premium Spot",
                evChargingSpot: "EV Charging Spot",
                valetSpot: "Valet Spot",
                add: "Add",
                remove: "Remove",
                spotAdded: (id) => `Spot ${id} added!`,
                spotRemoved: (id) => `Spot ${id} removed!`,
                spotAlreadyExists: (id) => `Spot ${id} already exists.`,
                spotNotFound: (id) => `Spot ${id} not found.`,
                bookingHistory: "Booking History",
                noBookingsYet: "No bookings yet.",
                manageServiceRequests: "Manage Service Requests",
                noServiceRequests: "No service requests.",
                requestType: "Request Type",
                customer: "Customer",
                complete: "Complete",
                requestCompleted: "Request completed!",
                selectUserType: "Select User Type",
                customerApp: "Customer App",
                serviceProviderApp: "Service Provider App",
                copyright: "© 2025 SmartPark. All rights reserved.",
                enhancedWithAI: "Enhanced with AI, compliant with global standards, and designed for your convenience.",
                forgotPassword: "Forgot Password?",
                resetPassword: "Reset Password",
                enterEmailForReset: "Enter your email to receive a password reset link.",
                sendResetLink: "Send Reset Link",
                resetLinkSent: "If an account with that email exists, a password reset link has been sent.",
                backToLogin: "Back to Login",
                providerRegistration: "Provider Registration",
                registerAsProvider: "Register as a Service Provider",
                backToUserTypeSelection: "Back to User Type Selection",
                currentLocation: "Current Location",
                close: "Close",
                aboutUs: "About Us",
                aboutUsContent: "SmartPark is dedicated to revolutionizing urban mobility by providing smart, efficient, and user-friendly parking solutions. Our mission is to reduce traffic congestion, minimize parking search times, and enhance the overall urban experience through innovative technology and strategic partnerships.\n\nOur Team:\n- Nilabja Sen\n- Animesh\n- Armaan Sanket\n- Sukhbir Sohal\n- Rahul",
                disclaimer: "Disclaimer: This application is a prototype for demonstration purposes. All data, prices, and services are simulated. Real-world functionality may vary.",
                emailSent: "Registration email sent to ",
                carModel: "Car Model",
                carCompany: "Car Company",
                maintenanceType: "Maintenance Type",
                selectMaintenance: "Select Maintenance Type",
                oilChange: "Oil Change",
                tireRotation: "Tire Rotation",
                brakeInspection: "Brake Inspection",
                fullService: "Full Service",
                other: "Other",
                scheduleBooking: "Schedule Booking",
                bookingScheduled: "Booking Scheduled!",
                pickUpLocation: "Pick-up Location",
                dropOffLocation: "Drop-off Location",
                valetBooking: "Valet Booking",
                valetBooked: "Valet service booked!",
                gpsRequired: "GPS Location Required",
                enableGpsMessage: "Please enable GPS location for this service to work.",
                enableGps: "Enable GPS",
                gpsEnabled: "GPS Enabled!",
                comingSoon: "Coming Soon!",
                comingSoonMessage: "Hey!! We will be coming soon to your City too... Happy Booking.",
                lastBooked: "Last Booked",
                peakHours: "Peak Hours",
                fillingFast: "Filling Fast",
                spotsAvailable: (num) => `${num} spots available`,
                moreDetails: "More Details",
                loginSuccessful: "Login Successful!"
            },
            hi: {
                appName: "स्मार्टपार्क",
                settings: "सेटिंग्स",
                logout: "लॉगआउट",
                registerForSmartPark: "नया उपयोगकर्ता!! यहाँ रजिस्टर करें....", // Updated text
                fullName: "पूरा नाम",
                mobileNumber: "मोबाइल नंबर",
                email: "ईमेल",
                password: "पासवर्ड",
                register: "रजिस्टर करें",
                registrationSuccessful: "पंजीकरण सफल!",
                welcomeToSmartPark: "स्मार्टपार्क में आपका स्वागत है! अब आप पार्किंग स्पॉट खोज सकते हैं।",
                registrationFailed: "पंजीकरण विफल",
                pleaseFillAllFields: "कृपया सभी फ़ील्ड भरें।",
                findYourParkingSpot: "अपनी पार्किंग स्पॉट खोजें",
                selectCity: "शहर चुनें",
                enterLocation: "स्थान या गंतव्य दर्ज करें",
                search: "खोजें",
                poweredByAI: "इष्टतम सुझावों के लिए प्रेडिक्टिव एआई द्वारा संचालित।",
                realTimeMapView: "रीयल-टाइम मानचित्र दृश्य",
                available: "उपलब्ध",
                premium: "प्रीमियम",
                occupied: "व्यस्त",
                searchResults: "खोज परिणाम",
                searchingForParking: (loc) => `"${loc}" के पास पार्किंग खोज रहे हैं। रीयल-टाइम उपलब्धता दिखा रहा है।`,
                searchError: "खोज त्रुटि",
                pleaseEnterLocation: "कृपया खोज के लिए एक स्थान दर्ज करें।",
                selectYourSlot: "अपना स्लॉट चुनें",
                pricesDynamicallyAdjusted: "मांग के आधार पर कीमतें गतिशील रूप से समायोजित की जाती हैं।",
                slotSelected: "स्लॉट चुना गया",
                youHaveSelected: (slotName, price) => `आपने ${slotName} चुना है। कीमत: ₹${price}।`,
                selectionRequired: "चयन आवश्यक",
                pleaseSelectSlot: "कृपया पहले एक पार्किंग स्लॉट चुनें।",
                carWashAddon: "1-टैप कार वॉश ऐड-ऑन (₹150)",
                proceedToBooking: "बुकिंग के लिए आगे बढ़ें",
                bookingSummary: "बुकिंग सारांश",
                noBookingDetails: "कोई बुकिंग विवरण उपलब्ध नहीं है। कृपया वापस जाएं और एक स्लॉट चुनें।",
                parkingSlot: "पार्किंग स्लॉट",
                basePrice: "मूल्य",
                carWash: "1-टैप कार वॉश",
                localParkingTax: (rate) => `स्थानीय पार्किंग कर (${rate}%):`,
                totalAmount: "कुल राशि:",
                confirmBooking: "बुकिंग और भुगतान की पुष्टि करें",
                bookingConfirmed: "आपकी बुकिंग की पुष्टि हो गई है! भुगतान के लिए आगे बढ़ रहे हैं।",
                completePayment: "भुगतान पूरा करें",
                amountDue: "देय राशि:",
                payWithUPI: "यूपीआई से भुगतान करें",
                corporateBilling: "कॉर्पोरेट बिलिंग",
                paymentProcessedSecurely: "आपका भुगतान पीसीआई-डीएसएस अनुपालन के लिए टोकनाइजेशन के साथ सुरक्षित रूप से संसाधित किया जाता है।",
                processingPayment: "भुगतान संसाधित हो रहा है",
                simulatingUpiPayment: "यूपीआई भुगतान का अनुकरण... पीसीआई-डीएसएस अनुपालन के लिए भुगतान टोकनाइज्ड।",
                paymentSuccessful: "भुगतान सफल!",
                paidViaUPI: (amount) => `₹${amount} यूपीआई के माध्यम से भुगतान किया गया। आपका क्यूआर चेक-इन कोड तैयार है।`,
                requestSentToCorporate: "आपके कॉर्पोरेट खाते को अनुमोदन के लिए अनुरोध भेजा गया। भुगतान स्वचालित रूप से संसाधित किया जाएगा।",
                invoiceDetails: "चालान विवरण",
                noInvoiceAvailable: "कोई चालान उपलब्ध नहीं है। कृपया पहले एक बुकिंग पूरी करें।",
                invoiceID: "चालान आईडी:",
                date: "दिनांक:",
                service: "सेवा:",
                addOn: "ऐड-ऑन:",
                taxableAmount: "कर योग्य राशि:",
                gst: (rate) => `जीएसटी (${rate}%):`,
                totalAmountDue: "कुल देय राशि:",
                qrCheckinCode: "क्यूआर चेक-इन कोड",
                scanCodeForEntry: "निर्बाध प्रवेश और ऑटो-चेकआउट के लिए पार्किंग गेट पर इस कोड को स्कैन करें।",
                startNewBooking: "नई बुकिंग शुरू करें",
                thankYou: "धन्यवाद!",
                parkingExperienceComplete: "आपका पार्किंग अनुभव अब पूरा हो गया है। हम आपकी फिर से सेवा करने के लिए तत्पर हैं!",
                appSettings: "ऐप सेटिंग्स",
                languageRegion: "भाषा और क्षेत्र",
                currentLanguage: (lang) => `वर्तमान भाषा: ${lang === 'en' ? 'अंग्रेजी' : 'हिंदी'}`,
                familySharing: "परिवार साझाकरण",
                shareSubscription: "अपनी स्मार्टपार्क सदस्यता के लाभ अपने परिवार के सदस्यों के साथ साझा करें।",
                manageFamily: "परिवार प्रबंधित करें",
                familySharingInitiated: "परिवार साझाकरण सेटअप शुरू किया गया। ईमेल के माध्यम से सदस्यों को आमंत्रित करें।",
                emergencyServices: "आपातकालीन सेवाएं",
                requestAssistance: "ऐप से सीधे आपातकालीन सहायता का अनुरोध करें।",
                requestJumpStart: "जंप-स्टार्ट का अनुरोध करें",
                jumpStartRequested: "आपातकालीन जंप-स्टार्ट सेवा का अनुरोध किया गया। हमारी टीम रास्ते में है!",
                dataPrivacy: "डेटा और गोपनीयता (जीडीपीआर)",
                deleteMyAccount: "मेरा खाता हटाएँ",
                exerciseRightToDelete: "डेटा हटाने के अपने अधिकार का प्रयोग करें।",
                confirmDeletion: "हटाने की पुष्टि करें",
                areYouSureDeleteAccount: "क्या आप वाकई अपना खाता हटाना चाहते हैं? यह कार्रवाई अपरिवर्तनीय है।",
                gdprDataRemoval: "जीडीपीआर के अनुसार, आपका सभी व्यक्तिगत डेटा स्थायी रूप से हटा दिया जाएगा।",
                accountDeleted: "खाता हटा दिया गया",
                accountDeletedMessage: "जीडीपीआर अनुपालन के अनुसार आपका खाता और सभी संबंधित डेटा स्थायी रूप से हटा दिए गए हैं।",
                suggestedParkingLocations: "सुझाए गए पार्किंग स्थान",
                bestParkingFor: (loc) => `"${loc}" के लिए सर्वश्रेष्ठ पार्किंग`,
                regularUsedLocations: "नियमित रूप से उपयोग किए जाने वाले स्थान",
                location: "स्थान",
                distance: "दूरी",
                availability: "उपलब्धता",
                services: "सेवाएं",
                carWashDetailing: "कार वॉश और डिटेलिंग",
                getCarSparkling: "पार्क करते समय अपनी कार को चमकदार बनाएं।",
                evCharging: "ईवी चार्जिंग",
                findBookCharging: "चार्जिंग स्टेशन खोजें और बुक करें।",
                vehicleMaintenance: "वाहन रखरखाव",
                minorServicing: "आपकी पार्किंग स्पॉट पर मामूली सर्विसिंग।",
                valetParking: "वैलेट पार्किंग",
                hassleFreeParking: "परेशानी मुक्त पार्किंग और पुनर्प्राप्ति।",
                priorityBooking: "प्रीमियम उपयोगकर्ताओं के लिए प्राथमिकता बुकिंग",
                premiumBenefits: "प्रीमियम सदस्यता के साथ गारंटीकृत स्पॉट और विशेष पहुंच का आनंद लें।",
                dynamicPricing: "गतिशील मूल्य निर्धारण समझाया गया",
                pricingAdjusts: "हमारी कीमतें मांग के आधार पर वास्तविक समय में समायोजित होती हैं, जिससे उचित दरें सुनिश्चित होती हैं।",
                corporateBillingBenefits: "कॉर्पोरेट बिलिंग लाभ",
                streamlineExpenses: "केंद्रीकृत बिलिंग के साथ अपने व्यवसाय के लिए पार्किंग खर्चों को सुव्यवस्थित करें।",
                evChargingLocator: "ईवी चार्जिंग लोकेटर",
                findChargingStations: "मानचित्र पर आस-पास के ईवी चार्जिंग स्टेशन खोजें।",
                locateCharging: "चार्जिंग स्टेशन खोजें",
                valetParkingService: "वैलेट पार्किंग सेवा",
                bookValet: "अंतिम सुविधा के लिए अपनी कार पार्क करने के लिए एक वैलेट बुक करें।",
                bookValetService: "वैलेट सेवा बुक करें",
                carWashService: "कार वॉश सेवा",
                scheduleCarWash: "अपनी कार पार्क करते समय कार वॉश और डिटेलिंग शेड्यूल करें।",
                scheduleService: "सेवा शेड्यूल करें",
                nearbyAvailableSpots: "आस-पास उपलब्ध स्पॉट",
                spotBookedSuccessfully: (num) => `${num} पर स्पॉट सफलतापूर्वक बुक किया गया!`,
                automatedParkingBooked: "स्वचालित पार्किंग स्पॉट सफलतापूर्वक बुक किया गया!",
                prebookAdvanced: "उन्नत प्री-बुकिंग",
                timeFrom: "समय से",
                timeTo: "समय तक",
                confirmPrebook: "प्री-बुकिंग की पुष्टि करें",
                prebookSubmitted: "आपकी प्री-बुकिंग का अनुरोध सबमिट कर दिया गया है। जब स्पॉट की पुष्टि हो जाएगी तो हम आपको सूचित करेंगे!",
                myBookings: "मेरी बुकिंग",
                status: "स्थिति:",
                confirmed: "पुष्टि की गई",
                completed: "पूरा हो गया",
                repeatBooking: "बुकिंग दोहराएँ",
                login: "लॉगिन",
                userLogin: "उपयोगकर्ता लॉगिन",
                providerLogin: "सेवा प्रदाता लॉगिन",
                username: "उपयोगकर्ता नाम",
                loginFailed: "लॉगिन विफल",
                invalidCredentials: "अमान्य क्रेडेंशियल। कृपया पुनः प्रयास करें।",
                welcomeProvider: "स्वागत है, सेवा प्रदाता!",
                dashboard: "डैशबोर्ड",
                currentOccupancy: "वर्तमान अधिभोग",
                parkingSpots: "पार्किंग स्पॉट",
                occupiedSpots: "व्यस्त स्पॉट",
                availableSpots: "उपलब्ध स्पॉट",
                manageSpots: "स्पॉट प्रबंधित करें",
                addSpot: "स्पॉट जोड़ें",
                spotId: "स्पॉट आईडी",
                spotType: "स्पॉट प्रकार",
                standard: "मानक",
                premiumSpot: "प्रीमियम स्पॉट",
                evChargingSpot: "ईवी चार्जिंग स्पॉट",
                valetSpot: "वैलेट स्पॉट",
                add: "जोड़ें",
                remove: "हटाएँ",
                spotAdded: (id) => `स्पॉट ${id} जोड़ा गया!`,
                spotRemoved: (id) => `स्पॉट ${id} हटाया गया!`,
                spotAlreadyExists: (id) => `स्पॉट ${id} पहले से मौजूद है।`,
                spotNotFound: (id) => `स्पॉट ${id} नहीं मिला।`,
                bookingHistory: "बुकिंग इतिहास",
                noBookingsYet: "अभी तक कोई बुकिंग नहीं है।",
                manageServiceRequests: "सेवा अनुरोध प्रबंधित करें",
                noServiceRequests: "कोई सेवा अनुरोध नहीं है।",
                requestType: "अनुरोध प्रकार",
                customer: "ग्राहक",
                complete: "पूरा करें",
                requestCompleted: "अनुरोध पूरा हुआ!",
                selectUserType: "उपयोगकर्ता प्रकार चुनें",
                customerApp: "ग्राहक ऐप",
                serviceProviderApp: "सेवा प्रदाता ऐप",
                copyright: "© 2025 स्मार्टपार्क। सर्वाधिकार सुरक्षित।",
                enhancedWithAI: "एआई के साथ उन्नत, वैश्विक मानकों के अनुरूप, और आपकी सुविधा के लिए डिज़ाइन किया गया।",
                forgotPassword: "पासवर्ड भूल गए?",
                resetPassword: "पासवर्ड रीसेट करें",
                enterEmailForReset: "पासवर्ड रीसेट लिंक प्राप्त करने के लिए अपना ईमेल दर्ज करें।",
                sendResetLink: "रीसेट लिंक भेजें",
                resetLinkSent: "यदि उस ईमेल के साथ कोई खाता मौजूद है, तो एक पासवर्ड रीसेट लिंक भेजा गया है।",
                backToLogin: "लॉगिन पर वापस",
                providerRegistration: "प्रदाता पंजीकरण",
                registerAsProvider: "सेवा प्रदाता के रूप में रजिस्टर करें",
                backToUserTypeSelection: "उपयोगकर्ता प्रकार चयन पर वापस",
                currentLocation: "वर्तमान स्थान",
                close: "बंद करें",
                aboutUs: "हमारे बारे में",
                aboutUsContent: "SmartPark is dedicated to revolutionizing urban mobility by providing smart, efficient, and user-friendly parking solutions. Our mission is to reduce traffic congestion, minimize parking search times, and enhance the overall urban experience through innovative technology and strategic partnerships.\n\nOur Team:\n- Nilabja Sen\n- Animesh\n- Armaan Sanket\n- Sukhbir Sohal\n- Rahul",
                disclaimer: "Disclaimer: This application is a prototype for demonstration purposes. All data, prices, and services are simulated. Real-world functionality may vary.",
                emailSent: "Registration email sent to ",
                carModel: "Car Model",
                carCompany: "Car Company",
                maintenanceType: "Maintenance Type",
                selectMaintenance: "Select Maintenance Type",
                oilChange: "Oil Change",
                tireRotation: "Tire Rotation",
                brakeInspection: "Brake Inspection",
                fullService: "Full Service",
                other: "Other",
                scheduleBooking: "Schedule Booking",
                bookingScheduled: "Booking Scheduled!",
                pickUpLocation: "Pick-up Location",
                dropOffLocation: "Drop-off Location",
                valetBooking: "Valet Booking",
                valetBooked: "Valet service booked!",
                gpsRequired: "GPS Location Required",
                enableGpsMessage: "Please enable GPS location for this service to work.",
                enableGps: "Enable GPS",
                gpsEnabled: "GPS Enabled!",
                comingSoon: "Coming Soon!",
                comingSoonMessage: "Hey!! We will be coming soon to your City too... Happy Booking.",
                lastBooked: "Last Booked",
                peakHours: "Peak Hours",
                fillingFast: "Filling Fast",
                spotsAvailable: (num) => `${num} spots available`,
                moreDetails: "More Details",
                loginSuccessful: "Login Successful!"
            }
        };

        // --- Header Component ---
        const Header = ({ onNavigate, onLogout, showLogout = true }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            return (
                <header className="bg-blue-800 p-4 shadow-lg flex items-center justify-between sticky top-0 z-20">
                    <div className="flex items-center space-x-2">
                        <span className="text-amber-400 text-4xl font-black relative">
                            P
                            <span className="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-white text-xl font-bold">
                                &#x27A4;
                            </span>
                        </span>
                        <h1 className="text-3xl font-extrabold text-white">{t.appName}</h1>
                    </div>
                    <nav className="flex items-center space-x-4">
                        <button onClick={() => onNavigate('settings')} className="text-blue-200 hover:text-white text-lg font-semibold">⚙️ {t.settings}</button>
                        {showLogout && (
                            <button onClick={onLogout} className="bg-red-600 text-white font-bold py-2 px-4 rounded-xl hover:bg-red-700 transition duration-300">
                                {t.logout}
                            </button>
                        )}
                    </nav>
                </header>
            );
        };

        // --- Reusable Modal Component ---
        const Modal = ({ show, title, message, onClose, children }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            if (!show) return null;

            return (
                <div className="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50">
                    <div className="bg-blue-900 p-6 rounded-2xl shadow-xl text-center max-w-lg w-full space-y-4 border border-blue-700">
                        {title && <h3 className="text-2xl font-bold text-amber-400 mb-2">{title}</h3>}
                        {message && <p className="text-white text-lg">{message}</p>}
                        {children}
                        <button 
                            onClick={onClose} 
                            className="mt-4 bg-amber-400 text-blue-900 font-bold py-2 px-5 rounded-xl hover:bg-amber-500 transition duration-300"
                        >
                            {t.close}
                        </button>
                    </div>
                </div>
            );
        };

        // --- Footer Component ---
        const Footer = () => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            return (
                <footer className="text-center py-8 mt-16 border-t border-blue-200 bg-blue-800 text-blue-200">
                    <p>{t.copyright}</p>
                    <p className="text-sm mt-2">{t.enhancedWithAI}</p>
                </footer>
            );
        };

        // --- Forgot Password Screen ---
        const ForgotPasswordScreen = ({ onBackToLogin, showModal }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            const [email, setEmail] = useState('');
            const [modalShow, setModalShow] = useState(false);

            const handleResetPassword = () => {
                if (email) {
                    // In a real application, you would send an API request here
                    setModalShow(true);
                }
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md transform transition-all duration-300 scale-100 opacity-100">
                        <h2 className="text-3xl font-extrabold text-blue-800 mb-6 text-center">{t.resetPassword}</h2>
                        <p className="text-gray-600 mb-6 text-center">{t.enterEmailForReset}</p>
                        <input
                            type="email"
                            placeholder={t.email}
                            value={email}
                            onChange={(e) => setEmail(e.target.value)}
                            className="w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                        <button
                            onClick={handleResetPassword}
                            className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                        >
                            {t.sendResetLink}
                        </button>
                        <button
                            onClick={onBackToLogin}
                            className="w-full mt-4 text-blue-600 hover:underline font-semibold"
                        >
                            {t.backToLogin}
                        </button>
                    </div>
                    <Modal
                        show={modalShow}
                        title={t.resetPassword}
                        message={t.resetLinkSent}
                        onClose={() => setModalShow(false)}
                    />
                </div>
            );
        };

        // --- Settings Screen ---
        const SettingsScreen = ({ onBack, setAppLanguage }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];

            return (
                <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-2xl transform transition-all duration-300 scale-100 opacity-100">
                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.appSettings}</h2>

                        <div className="space-y-6">
                            {/* Language & Region */}
                            <div className="bg-blue-50 p-6 rounded-xl border border-blue-200 shadow-sm">
                                <h3 className="text-2xl font-bold text-blue-700 mb-3">{t.languageRegion}</h3>
                                <p className="text-gray-700 mb-4">{t.currentLanguage(appLanguage)}</p>
                                <div className="flex space-x-4">
                                    <button
                                        onClick={() => setAppLanguage('en')}
                                        className={`py-2 px-5 rounded-lg font-semibold transition-all duration-300 ${
                                            appLanguage === 'en' ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'
                                        }`}
                                    >
                                        English
                                    </button>
                                    <button
                                        onClick={() => setAppLanguage('hi')}
                                        className={`py-2 px-5 rounded-lg font-semibold transition-all duration-300 ${
                                            appLanguage === 'hi' ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'
                                        }`}
                                    >
                                        हिन्दी
                                    </button>
                                </div>
                            </div>

                            {/* Family Sharing */}
                            <div className="bg-green-50 p-6 rounded-xl border border-green-200 shadow-sm">
                                <h3 className="text-2xl font-bold text-green-700 mb-3">{t.familySharing}</h3>
                                <p className="text-gray-700 mb-4">{t.shareSubscription}</p>
                                <button
                                    onClick={() => alert(t.familySharingInitiated)}
                                    className="bg-green-600 text-white font-bold py-2 px-5 rounded-xl hover:bg-green-700 transition duration-300 shadow-md"
                                >
                                    {t.manageFamily}
                                </button>
                            </div>

                            {/* Emergency Services */}
                            <div className="bg-red-50 p-6 rounded-xl border border-red-200 shadow-sm">
                                <h3 className="text-2xl font-bold text-red-700 mb-3">{t.emergencyServices}</h3>
                                <p className="text-gray-700 mb-4">{t.requestAssistance}</p>
                                <button
                                    onClick={() => alert(t.jumpStartRequested)}
                                    className="bg-red-600 text-white font-bold py-2 px-5 rounded-xl hover:bg-red-700 transition duration-300 shadow-md"
                                >
                                    {t.requestJumpStart}
                                </button>
                            </div>

                            {/* Data & Privacy (GDPR) */}
                            <div className="bg-purple-50 p-6 rounded-xl border border-purple-200 shadow-sm">
                                <h3 className="text-2xl font-bold text-purple-700 mb-3">{t.dataPrivacy}</h3>
                                <p className="text-gray-700 mb-4">{t.exerciseRightToDelete}</p>
                                <button
                                    onClick={() => {
                                        if (window.confirm(t.areYouSureDeleteAccount + "\n\n" + t.gdprDataRemoval)) {
                                            alert(t.accountDeletedMessage);
                                            onBack(); // Go back after deletion
                                        }
                                    }}
                                    className="bg-purple-600 text-white font-bold py-2 px-5 rounded-xl hover:bg-purple-700 transition duration-300 shadow-md"
                                >
                                    {t.deleteMyAccount}
                                </button>
                            </div>
                        </div>

                        <button
                            onClick={onBack}
                            className="mt-8 bg-gray-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition duration-300 w-full shadow-lg"
                        >
                            {t.backToUserTypeSelection} {/* Reusing this translation key for "Back" */}
                        </button>
                    </div>
                </div>
            );
        };

        // --- Customer App Components (Placeholder for brevity, you already have these) ---
        const CustomerApp = ({ onLogout, onBackToUserTypeSelection }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            const [view, setView] = useState('findParking'); // 'findParking', 'bookingSummary', 'payment', 'invoice', 'qrCode', 'myBookings', 'prebook'
            const [selectedSlot, setSelectedSlot] = useState(null);
            const [includeCarWash, setIncludeCarWash] = useState(false);
            const [bookingDetails, setBookingDetails] = useState(null);
            const [invoice, setInvoice] = useState(null);
            const [locationSearch, setLocationSearch] = useState('');
            const [showSearchModal, setShowSearchModal] = useState(false);
            const [showGpsModal, setShowGpsModal] = useState(false);
            const [isGpsEnabled, setIsGpsEnabled] = useState(false);

            const handleSearch = () => {
                if (!locationSearch) {
                    setShowSearchModal(true);
                    return;
                }
                alert(t.searchingForParking(locationSearch));
                // Simulate search results
                // For a real app, this would involve an API call
                const simulatedSpots = [
                    { id: 'spotA1', name: 'Spot A1 - Level 1', type: 'standard', price: 50, distance: '100m', availability: 'High' },
                    { id: 'spotB3', name: 'Spot B3 - Level 2 (Premium)', type: 'premium', price: 100, distance: '150m', availability: 'Medium' },
                    { id: 'spotC5', name: 'Spot C5 - EV Charging', type: 'ev-charging', price: 70, distance: '200m', availability: 'Low' },
                    { id: 'spotD2', name: 'Spot D2 - Valet', type: 'valet', price: 120, distance: '50m', availability: 'High' }
                ];
                // In a real app, you would set state with actual results
                // For now, we'll just proceed to slot selection after a simulated search
                setView('selectSlot');
            };

            const handleSlotSelection = (slot) => {
                setSelectedSlot(slot);
                alert(t.youHaveSelected(slot.name, slot.price));
            };

            const handleProceedToBooking = () => {
                if (!selectedSlot) {
                    alert(t.pleaseSelectSlot);
                    return;
                }
                const basePrice = selectedSlot.price;
                const carWashPrice = includeCarWash ? 150 : 0;
                const localTaxRate = 18; // Example tax rate
                const taxableAmount = basePrice + carWashPrice;
                const taxAmount = (taxableAmount * localTaxRate) / 100;
                const totalAmount = taxableAmount + taxAmount;

                setBookingDetails({
                    slot: selectedSlot,
                    basePrice: basePrice,
                    carWash: includeCarWash,
                    carWashPrice: carWashPrice,
                    localTaxRate: localTaxRate,
                    taxAmount: taxAmount,
                    totalAmount: totalAmount
                });
                setView('bookingSummary');
            };

            const handleConfirmBooking = () => {
                alert(t.bookingConfirmed);
                setView('payment');
            };

            const handlePayment = (method) => {
                if (!bookingDetails) return;
                alert(t.processingPayment);
                setTimeout(() => {
                    if (method === 'upi') {
                        alert(t.simulatingUpiPayment);
                        alert(t.paymentSuccessful);
                        alert(t.paidViaUPI(bookingDetails.totalAmount));
                    } else if (method === 'corporate') {
                        alert(t.requestSentToCorporate);
                    }
                    const newInvoice = {
                        id: generateId(),
                        date: new Date().toLocaleDateString(),
                        service: bookingDetails.slot.name,
                        addOn: bookingDetails.carWash ? t.carWash : t.none,
                        basePrice: bookingDetails.basePrice,
                        carWashPrice: bookingDetails.carWashPrice,
                        taxableAmount: bookingDetails.basePrice + bookingDetails.carWashPrice,
                        gstRate: bookingDetails.localTaxRate,
                        gstAmount: bookingDetails.taxAmount,
                        totalAmount: bookingDetails.totalAmount
                    };
                    setInvoice(newInvoice);
                    setView('qrCode');
                }, 1500);
            };

            const handlePrebook = () => {
                alert(t.prebookSubmitted);
                setView('findParking'); // Go back to main search after pre-booking
            };

            const handleMaintenanceBooking = () => {
                alert(t.bookingScheduled);
                setView('findParking');
            };

            const handleValetBooking = () => {
                if (!isGpsEnabled) {
                    setShowGpsModal(true);
                    return;
                }
                alert(t.valetBooked);
                setView('findParking');
            };

            const enableGps = () => {
                setIsGpsEnabled(true);
                setShowGpsModal(false);
                alert(t.gpsEnabled);
            };

            const renderCustomerView = () => {
                switch (view) {
                    case 'findParking':
                        return (
                            <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow flex flex-col items-center justify-center w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.findYourParkingSpot}</h2>
                                        
                                        <div className="mb-6 space-y-4">
                                            <select
                                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-700"
                                            >
                                                <option value="">{t.selectCity}</option>
                                                <option value="bengaluru">Bengaluru</option>
                                                <option value="mumbai">Mumbai</option>
                                                <option value="delhi">{t.comingSoon}</option>
                                            </select>
                                            <input
                                                type="text"
                                                placeholder={t.enterLocation}
                                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                value={locationSearch}
                                                onChange={(e) => setLocationSearch(e.target.value)}
                                            />
                                        </div>
                                        <button
                                            onClick={handleSearch}
                                            className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                                        >
                                            {t.search}
                                        </button>
                                        <p className="text-center text-gray-500 text-sm mt-6">{t.poweredByAI}</p>
                                    </div>

                                    {/* Suggested Parking Locations */}
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-4xl mt-8">
                                        <h3 className="text-3xl font-extrabold text-blue-800 mb-6">{t.suggestedParkingLocations}</h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            {/* Location Card 1 */}
                                            <div className="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm flex items-center justify-between">
                                                <div>
                                                    <p className="text-lg font-semibold text-gray-800">Phoenix Mall, Whitefield</p>
                                                    <p className="text-sm text-gray-500">{t.distance}: 2.5 km</p>
                                                    <p className="text-sm font-medium text-green-600">{t.availability}: {t.spotsAvailable(12)}</p>
                                                </div>
                                                <button onClick={() => alert(t.bestParkingFor('Phoenix Mall'))} className="bg-blue-500 text-white py-2 px-4 rounded-lg text-sm hover:bg-blue-600 transition duration-300">
                                                    {t.moreDetails}
                                                </button>
                                            </div>
                                            {/* Location Card 2 */}
                                            <div className="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm flex items-center justify-between">
                                                <div>
                                                    <p className="text-lg font-semibold text-gray-800">MG Road Metro Station</p>
                                                    <p className="text-sm text-gray-500">{t.distance}: 5.1 km</p>
                                                    <p className="text-sm font-medium text-orange-600">{t.availability}: {t.fillingFast}</p>
                                                </div>
                                                <button onClick={() => alert(t.bestParkingFor('MG Road Metro Station'))} className="bg-blue-500 text-white py-2 px-4 rounded-lg text-sm hover:bg-blue-600 transition duration-300">
                                                    {t.moreDetails}
                                                </button>
                                            </div>
                                        </div>
                                        <h3 className="text-3xl font-extrabold text-blue-800 mb-6 mt-8">{t.services}</h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div className="bg-indigo-50 p-6 rounded-xl border border-indigo-200 shadow-sm">
                                                <h4 className="text-xl font-bold text-indigo-700 mb-2">{t.carWashDetailing}</h4>
                                                <p className="text-gray-700 mb-4">{t.getCarSparkling}</p>
                                                <button onClick={() => alert(t.scheduleService)} className="bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition duration-300">
                                                    {t.scheduleService}
                                                </button>
                                            </div>
                                            <div className="bg-teal-50 p-6 rounded-xl border border-teal-200 shadow-sm">
                                                <h4 className="text-xl font-bold text-teal-700 mb-2">{t.evCharging}</h4>
                                                <p className="text-gray-700 mb-4">{t.findBookCharging}</p>
                                                <button onClick={() => alert(t.locateCharging)} className="bg-teal-600 text-white py-2 px-4 rounded-lg hover:bg-teal-700 transition duration-300">
                                                    {t.locateCharging}
                                                </button>
                                            </div>
                                            <div className="bg-amber-50 p-6 rounded-xl border border-amber-200 shadow-sm">
                                                <h4 className="text-xl font-bold text-amber-700 mb-2">{t.valetParking}</h4>
                                                <p className="text-gray-700 mb-4">{t.hassleFreeParking}</p>
                                                <button onClick={handleValetBooking} className="bg-amber-600 text-white py-2 px-4 rounded-lg hover:bg-amber-700 transition duration-300">
                                                    {t.bookValetService}
                                                </button>
                                            </div>
                                            <div className="bg-pink-50 p-6 rounded-xl border border-pink-200 shadow-sm">
                                                <h4 className="text-xl font-bold text-pink-700 mb-2">{t.vehicleMaintenance}</h4>
                                                <p className="text-gray-700 mb-4">{t.minorServicing}</p>
                                                <button onClick={handleMaintenanceBooking} className="bg-pink-600 text-white py-2 px-4 rounded-lg hover:bg-pink-700 transition duration-300">
                                                    {t.scheduleService}
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <Modal
                                        show={showSearchModal}
                                        title={t.searchError}
                                        message={t.pleaseEnterLocation}
                                        onClose={() => setShowSearchModal(false)}
                                    />
                                    <Modal
                                        show={showGpsModal}
                                        title={t.gpsRequired}
                                        message={t.enableGpsMessage}
                                        onClose={() => setShowGpsModal(false)}
                                    >
                                        <button onClick={enableGps} className="bg-blue-600 text-white font-bold py-2 px-5 rounded-xl hover:bg-blue-700 transition duration-300">
                                            {t.enableGps}
                                        </button>
                                    </Modal>
                                </div>
                                <Footer />
                            </div>
                        );
                    case 'selectSlot':
                        const parkingSpots = [
                            { id: 'P1A', name: 'Premium Slot P1A', price: 120, status: t.available, type: 'premium' },
                            { id: 'S2C', name: 'Standard Slot S2C', price: 80, status: t.available, type: 'standard' },
                            { id: 'E3B', name: 'EV Charging E3B', price: 100, status: t.occupied, type: 'ev-charging' },
                            { id: 'P4D', name: 'Premium Slot P4D', price: 130, status: t.available, type: 'premium' },
                        ];
                        return (
                            <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow flex flex-col items-center justify-center w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.selectYourSlot}</h2>
                                        <p className="text-center text-gray-600 mb-6">{t.pricesDynamicallyAdjusted}</p>
                                        
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                            {parkingSpots.map(spot => (
                                                <div
                                                    key={spot.id}
                                                    onClick={() => handleSlotSelection(spot)}
                                                    className={`p-6 rounded-xl border-2 cursor-pointer transition-all duration-300 ${
                                                        selectedSlot?.id === spot.id
                                                            ? 'border-blue-600 bg-blue-50 shadow-lg'
                                                            : 'border-gray-200 bg-gray-50 hover:border-blue-300 hover:shadow-md'
                                                    } ${spot.status === t.occupied ? 'opacity-60 cursor-not-allowed' : ''}`}
                                                >
                                                    <h3 className="text-xl font-bold text-blue-700 mb-2">{spot.name}</h3>
                                                    <p className="text-gray-800">₹{spot.price}</p>
                                                    <p className={`font-semibold ${spot.status === t.available ? 'text-green-600' : 'text-red-600'}`}>
                                                        {spot.status}
                                                    </p>
                                                </div>
                                            ))}
                                        </div>

                                        <div className="flex items-center mb-6">
                                            <input
                                                type="checkbox"
                                                id="carWash"
                                                checked={includeCarWash}
                                                onChange={(e) => setIncludeCarWash(e.target.checked)}
                                                className="mr-3 h-5 w-5 text-blue-600 rounded"
                                            />
                                            <label htmlFor="carWash" className="text-lg text-gray-700">{t.carWashAddon}</label>
                                        </div>

                                        <button
                                            onClick={handleProceedToBooking}
                                            className="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg"
                                        >
                                            {t.proceedToBooking}
                                        </button>
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    case 'bookingSummary':
                        return (
                            <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow flex flex-col items-center justify-center w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.bookingSummary}</h2>
                                        
                                        {bookingDetails ? (
                                            <div className="space-y-4 text-lg text-gray-700 mb-8">
                                                <p><strong>{t.parkingSlot}:</strong> {bookingDetails.slot.name}</p>
                                                <p><strong>{t.basePrice}:</strong> ₹{bookingDetails.basePrice}</p>
                                                <p><strong>{t.carWash}:</strong> {bookingDetails.carWash ? `₹${bookingDetails.carWashPrice}` : 'No'}</p>
                                                <p><strong>{t.localParkingTax(bookingDetails.localTaxRate)}</strong> ₹{bookingDetails.taxAmount.toFixed(2)}</p>
                                                <p className="text-2xl font-bold text-blue-800"><strong>{t.totalAmount}:</strong> ₹{bookingDetails.totalAmount.toFixed(2)}</p>
                                            </div>
                                        ) : (
                                            <p className="text-center text-red-600 text-lg mb-8">{t.noBookingDetails}</p>
                                        )}

                                        <button
                                            onClick={handleConfirmBooking}
                                            disabled={!bookingDetails}
                                            className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"
                                        >
                                            {t.confirmBooking}
                                        </button>
                                        <button
                                            onClick={() => setView('selectSlot')}
                                            className="w-full mt-4 bg-gray-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition duration-300 shadow-lg"
                                        >
                                            {t.back}
                                        </button>
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    case 'payment':
                        return (
                            <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow flex flex-col items-center justify-center w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.completePayment}</h2>
                                        
                                        {bookingDetails && (
                                            <p className="text-center text-3xl font-bold text-green-700 mb-8">{t.amountDue} ₹{bookingDetails.totalAmount.toFixed(2)}</p>
                                        )}

                                        <div className="space-y-4 mb-8">
                                            <button
                                                onClick={() => handlePayment('upi')}
                                                className="w-full bg-green-500 text-white font-bold py-4 px-6 rounded-xl hover:bg-green-600 transition duration-300 shadow-lg flex items-center justify-center space-x-3"
                                            >
                                                <img src="https://upload.wikimedia.org/wikipedia/commons/e/e1/UPI-Logo-Vector.svg" alt="UPI Logo" className="h-8" />
                                                <span>{t.payWithUPI}</span>
                                            </button>
                                            <button
                                                onClick={() => handlePayment('corporate')}
                                                className="w-full bg-purple-600 text-white font-bold py-4 px-6 rounded-xl hover:bg-purple-700 transition duration-300 shadow-lg"
                                            >
                                                {t.corporateBilling}
                                            </button>
                                        </div>
                                        <p className="text-center text-gray-500 text-sm mt-4">{t.paymentProcessedSecurely}</p>
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    case 'qrCode':
                        return (
                            <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow flex flex-col items-center justify-center w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.qrCheckinCode}</h2>
                                        <p className="text-center text-gray-600 mb-8">{t.scanCodeForEntry}</p>
                                        <div className="flex justify-center mb-8">
                                            {/* Placeholder for QR Code - In a real app, generate dynamically */}
                                            <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=SmartPark_Booking_QR_CODE_12345" alt="QR Code" className="w-64 h-64 border border-gray-300 rounded-lg" />
                                        </div>
                                        <button
                                            onClick={() => setView('invoice')}
                                            className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                                        >
                                            {t.invoiceDetails}
                                        </button>
                                        <button
                                            onClick={() => setView('findParking')}
                                            className="w-full mt-4 bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg"
                                        >
                                            {t.startNewBooking}
                                        </button>
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    case 'invoice':
                        return (
                            <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow flex flex-col items-center justify-center w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.invoiceDetails}</h2>
                                        {invoice ? (
                                            <div className="space-y-3 text-lg text-gray-700 mb-8">
                                                <p><strong>{t.invoiceID}</strong> {invoice.id}</p>
                                                <p><strong>{t.date}:</strong> {invoice.date}</p>
                                                <p><strong>{t.service}:</strong> {invoice.service}</p>
                                                <p><strong>{t.basePrice}:</strong> ₹{invoice.basePrice}</p>
                                                <p><strong>{t.addOn}:</strong> {invoice.addOn}</p>
                                                {invoice.carWashPrice > 0 && <p><strong>{t.carWash}:</strong> ₹{invoice.carWashPrice}</p>}
                                                <p><strong>{t.taxableAmount}:</strong> ₹{invoice.taxableAmount.toFixed(2)}</p>
                                                <p><strong>{t.gst(invoice.gstRate)}</strong> ₹{invoice.gstAmount.toFixed(2)}</p>
                                                <p className="text-2xl font-bold text-blue-800"><strong>{t.totalAmountDue}:</strong> ₹{invoice.totalAmount.toFixed(2)}</p>
                                            </div>
                                        ) : (
                                            <p className="text-center text-red-600 text-lg mb-8">{t.noInvoiceAvailable}</p>
                                        )}
                                        <button
                                            onClick={() => setView('findParking')}
                                            className="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg"
                                        >
                                            {t.startNewBooking}
                                        </button>
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    case 'myBookings':
                        const mockBookings = [
                            { id: 'B001', slot: 'P1A', date: '2025-06-25', status: t.completed, price: 120 },
                            { id: 'B002', slot: 'S2C', date: '2025-06-28', status: t.confirmed, price: 80 },
                        ];
                        return (
                            <div className="flex flex-col items-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.myBookings}</h2>
                                        {mockBookings.length > 0 ? (
                                            <div className="space-y-4">
                                                {mockBookings.map(booking => (
                                                    <div key={booking.id} className="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm flex justify-between items-center">
                                                        <div>
                                                            <p className="text-xl font-bold text-blue-700">{booking.slot}</p>
                                                            <p className="text-gray-700">{t.date}: {booking.date}</p>
                                                            <p className={`font-semibold ${booking.status === t.confirmed ? 'text-green-600' : 'text-gray-600'}`}>
                                                                {t.status} {booking.status}
                                                            </p>
                                                        </div>
                                                        <button onClick={() => alert(`${t.repeatBooking} ${booking.id}`)} className="bg-blue-500 text-white py-2 px-4 rounded-lg text-sm hover:bg-blue-600 transition duration-300">
                                                            {t.repeatBooking}
                                                        </button>
                                                    </div>
                                                ))}
                                            </div>
                                        ) : (
                                            <p className="text-center text-gray-600 text-lg">{t.noBookingsYet}</p>
                                        )}
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    case 'prebook':
                        const [prebookTimeFrom, setPrebookTimeFrom] = useState('');
                        const [prebookTimeTo, setPrebookTimeTo] = useState('');
                        return (
                            <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow flex flex-col items-center justify-center w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.prebookAdvanced}</h2>
                                        <div className="space-y-4 mb-6">
                                            <input
                                                type="datetime-local"
                                                value={prebookTimeFrom}
                                                onChange={(e) => setPrebookTimeFrom(e.target.value)}
                                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                            <input
                                                type="datetime-local"
                                                value={prebookTimeTo}
                                                onChange={(e) => setPrebookTimeTo(e.target.value)}
                                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                        </div>
                                        <button
                                            onClick={handlePrebook}
                                            className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                                        >
                                            {t.confirmPrebook}
                                        </button>
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    default:
                        return null;
                }
            };

            return (
                <div className="flex flex-col min-h-screen">
                    <Header onNavigate={setView} onLogout={onLogout} />
                    {renderCustomerView()}
                    <Footer />
                </div>
            );
        };

        // --- Service Provider App Components (Placeholder for brevity) ---
        const ServiceProviderApp = ({ onLogout, onBackToUserTypeSelection }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            const [view, setView] = useState('dashboard'); // 'dashboard', 'manageSpots', 'bookingHistory', 'serviceRequests'
            const [spotId, setSpotId] = useState('');
            const [spotType, setSpotType] = useState('standard');
            const [parkingSpots, setParkingSpots] = useState([
                { id: 'A01', type: 'standard', status: 'occupied' },
                { id: 'A02', type: 'premium', status: 'available' },
                { id: 'B01', type: 'ev-charging', status: 'occupied' },
            ]);
            const [serviceRequests, setServiceRequests] = useState([
                { id: 'SR001', type: 'Jump-Start', customer: 'Alice Smith', status: 'pending' },
                { id: 'SR002', type: 'Car Wash', customer: 'Bob Johnson', status: 'pending' },
            ]);

            const addSpot = () => {
                if (!spotId) return;
                if (parkingSpots.some(spot => spot.id === spotId)) {
                    alert(t.spotAlreadyExists(spotId));
                    return;
                }
                setParkingSpots([...parkingSpots, { id: spotId, type: spotType, status: 'available' }]);
                alert(t.spotAdded(spotId));
                setSpotId('');
            };

            const removeSpot = () => {
                if (!spotId) return;
                if (!parkingSpots.some(spot => spot.id === spotId)) {
                    alert(t.spotNotFound(spotId));
                    return;
                }
                setParkingSpots(parkingSpots.filter(spot => spot.id !== spotId));
                alert(t.spotRemoved(spotId));
                setSpotId('');
            };

            const completeRequest = (id) => {
                setServiceRequests(serviceRequests.map(req =>
                    req.id === id ? { ...req, status: 'completed' } : req
                ));
                alert(t.requestCompleted);
            };

            const renderProviderView = () => {
                switch (view) {
                    case 'dashboard':
                        const occupied = parkingSpots.filter(spot => spot.status === 'occupied').length;
                        const available = parkingSpots.filter(spot => spot.status === 'available').length;
                        return (
                            <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow flex flex-col items-center justify-center w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.dashboard}</h2>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                            <div className="bg-blue-50 p-6 rounded-xl border border-blue-200 shadow-sm text-center">
                                                <h3 className="text-2xl font-bold text-blue-700">{t.currentOccupancy}</h3>
                                                <p className="text-5xl font-extrabold text-blue-900 mt-4">{occupied} / {parkingSpots.length}</p>
                                                <p className="text-gray-600 mt-2">{t.parkingSpots}</p>
                                            </div>
                                            <div className="bg-green-50 p-6 rounded-xl border border-green-200 shadow-sm text-center">
                                                <h3 className="text-2xl font-bold text-green-700">{t.availableSpots}</h3>
                                                <p className="text-5xl font-extrabold text-green-900 mt-4">{available}</p>
                                                <p className="text-gray-600 mt-2">{t.spotsAvailable('')}</p>
                                            </div>
                                        </div>
                                        <div className="flex flex-col space-y-4">
                                            <button onClick={() => setView('manageSpots')} className="bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg">{t.manageSpots}</button>
                                            <button onClick={() => setView('bookingHistory')} className="bg-purple-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-purple-700 transition duration-300 shadow-lg">{t.bookingHistory}</button>
                                            <button onClick={() => setView('serviceRequests')} className="bg-orange-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-orange-700 transition duration-300 shadow-lg">{t.manageServiceRequests}</button>
                                        </div>
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    case 'manageSpots':
                        return (
                            <div className="flex flex-col items-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.manageSpots}</h2>
                                        <div className="space-y-4 mb-6">
                                            <input
                                                type="text"
                                                placeholder={t.spotId}
                                                value={spotId}
                                                onChange={(e) => setSpotId(e.target.value)}
                                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                            <select
                                                value={spotType}
                                                onChange={(e) => setSpotType(e.target.value)}
                                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-700"
                                            >
                                                <option value="standard">{t.standard}</option>
                                                <option value="premium">{t.premiumSpot}</option>
                                                <option value="ev-charging">{t.evChargingSpot}</option>
                                                <option value="valet">{t.valetSpot}</option>
                                            </select>
                                            <div className="flex space-x-4">
                                                <button onClick={addSpot} className="flex-1 bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg">
                                                    {t.addSpot}
                                                </button>
                                                <button onClick={removeSpot} className="flex-1 bg-red-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-red-700 transition duration-300 shadow-lg">
                                                    {t.remove}
                                                </button>
                                            </div>
                                        </div>
                                        <h3 className="text-2xl font-bold text-blue-700 mb-4">{t.parkingSpots}</h3>
                                        <div className="space-y-3">
                                            {parkingSpots.length > 0 ? (
                                                parkingSpots.map(spot => (
                                                    <div key={spot.id} className="bg-gray-50 p-4 rounded-lg border border-gray-200 flex justify-between items-center">
                                                        <p className="font-semibold">{t.spotId}: {spot.id} ({spot.type})</p>
                                                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${spot.status === 'available' ? 'bg-green-200 text-green-800' : 'bg-red-200 text-red-800'}`}>
                                                            {spot.status}
                                                        </span>
                                                    </div>
                                                ))
                                            ) : (
                                                <p className="text-center text-gray-600">{t.noSpotsYet}</p>
                                            )}
                                        </div>
                                        <button onClick={() => setView('dashboard')} className="w-full mt-6 bg-gray-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition duration-300 shadow-lg">
                                            {t.backToDashboard}
                                        </button>
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    case 'bookingHistory':
                        const providerBookings = [
                            { id: 'PB001', customer: 'Alice Smith', spot: 'A01', date: '2025-06-20', status: t.completed },
                            { id: 'PB002', customer: 'Bob Johnson', spot: 'A02', date: '2025-06-27', status: t.confirmed },
                        ];
                        return (
                            <div className="flex flex-col items-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.bookingHistory}</h2>
                                        {providerBookings.length > 0 ? (
                                            <div className="space-y-4">
                                                {providerBookings.map(booking => (
                                                    <div key={booking.id} className="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm">
                                                        <p className="font-bold text-lg">{t.customer}: {booking.customer}</p>
                                                        <p>{t.spotId}: {booking.spot}</p>
                                                        <p>{t.date}: {booking.date}</p>
                                                        <p className={`font-semibold ${booking.status === t.completed ? 'text-green-600' : 'text-orange-600'}`}>
                                                            {t.status} {booking.status}
                                                        </p>
                                                    </div>
                                                ))}
                                            </div>
                                        ) : (
                                            <p className="text-center text-gray-600 text-lg">{t.noBookingsYet}</p>
                                        )}
                                        <button onClick={() => setView('dashboard')} className="w-full mt-6 bg-gray-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition duration-300 shadow-lg">
                                            {t.backToDashboard}
                                        </button>
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    case 'serviceRequests':
                        return (
                            <div className="flex flex-col items-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                                <Header onNavigate={setView} onLogout={onLogout} />
                                <div className="flex-grow w-full max-w-4xl px-4 py-8">
                                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full transform transition-all duration-300 scale-100 opacity-100">
                                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.manageServiceRequests}</h2>
                                        {serviceRequests.length > 0 ? (
                                            <div className="space-y-4">
                                                {serviceRequests.map(request => (
                                                    <div key={request.id} className="bg-yellow-50 p-6 rounded-xl border border-yellow-200 shadow-sm flex justify-between items-center">
                                                        <div>
                                                            <p className="font-bold text-lg">{t.requestType}: {request.type}</p>
                                                            <p>{t.customer}: {request.customer}</p>
                                                            <p className={`font-semibold ${request.status === 'pending' ? 'text-orange-600' : 'text-green-600'}`}>
                                                                {t.status} {request.status}
                                                            </p>
                                                        </div>
                                                        {request.status === 'pending' && (
                                                            <button onClick={() => completeRequest(request.id)} className="bg-green-600 text-white py-2 px-4 rounded-lg text-sm hover:bg-green-700 transition duration-300">
                                                                {t.complete}
                                                            </button>
                                                        )}
                                                    </div>
                                                ))}
                                            </div>
                                        ) : (
                                            <p className="text-center text-gray-600 text-lg">{t.noServiceRequests}</p>
                                        )}
                                        <button onClick={() => setView('dashboard')} className="w-full mt-6 bg-gray-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition duration-300 shadow-lg">
                                            {t.backToDashboard}
                                        </button>
                                    </div>
                                </div>
                                <Footer />
                            </div>
                        );
                    default:
                        return null;
                }
            };

            return (
                <div className="flex flex-col min-h-screen">
                    <Header onNavigate={setView} onLogout={onLogout} />
                    {renderProviderView()}
                    <Footer />
                </div>
            );
        };

        // --- Login Screen ---
        const LoginScreen = ({ onLogin, onNavigate, onRegisterAsProvider }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [isUserLogin, setIsUserLogin] = useState(true); // true for user, false for provider
            const [modalShow, setModalShow] = useState(false);
            const [modalMessage, setModalMessage] = useState('');

            const handleLogin = () => {
                // Simplified login logic for demonstration
                // In a real application, you would validate credentials via an API
                if (isUserLogin) {
                    if (username === 'user@example.com' && password === 'password') {
                        onLogin('customer');
                        setModalMessage(t.loginSuccessful);
                    } else {
                        setModalMessage(t.invalidCredentials);
                    }
                } else { // Provider login
                    if (username === 'provider@example.com' && password === 'providerpass') {
                        onLogin('provider');
                        setModalMessage(t.welcomeProvider);
                    } else {
                        setModalMessage(t.invalidCredentials);
                    }
                }
                setModalShow(true);
            };

            const handleRegister = () => {
                // This would navigate to a separate registration screen in a full app
                alert(t.emailSent + username); // Simulating registration process
                onNavigate('register'); // Assuming a 'register' view in App
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                    <Header onNavigate={() => onNavigate('settings')} showLogout={false} /> {/* Settings accessible from login */}
                    <div className="flex-grow flex flex-col items-center justify-center w-full max-w-4xl px-4 py-8">
                        <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md transform transition-all duration-300 scale-100 opacity-100">
                            <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{isUserLogin ? t.userLogin : t.providerLogin}</h2>
                            
                            <div className="flex justify-center mb-6">
                                <button
                                    onClick={() => setIsUserLogin(true)}
                                    className={`py-2 px-5 rounded-l-xl font-semibold transition-all duration-300 ${
                                        isUserLogin ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'
                                    }`}
                                >
                                    {t.userLogin}
                                </button>
                                <button
                                    onClick={() => setIsUserLogin(false)}
                                    className={`py-2 px-5 rounded-r-xl font-semibold transition-all duration-300 ${
                                        !isUserLogin ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-200 text-gray-800 hover:bg-gray-300'
                                    }`}
                                >
                                    {t.providerLogin}
                                </button>
                            </div>

                            <input
                                type="text"
                                placeholder={t.username}
                                value={username}
                                onChange={(e) => setUsername(e.target.value)}
                                className="w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            />
                            <input
                                type="password"
                                placeholder={t.password}
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                className="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            />
                            <button
                                onClick={handleLogin}
                                className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                            >
                                {t.login}
                            </button>
                            <button
                                onClick={() => onNavigate('forgotPassword')}
                                className="w-full mt-4 text-blue-600 hover:underline font-semibold"
                            >
                                {t.forgotPassword}
                            </button>
                            {isUserLogin && (
                                <button
                                    onClick={handleRegister}
                                    className="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-green-700 transition duration-300 shadow-lg mt-4"
                                >
                                    {t.registerForSmartPark}
                                </button>
                            )}
                            {!isUserLogin && (
                                <button
                                    onClick={onRegisterAsProvider}
                                    className="w-full bg-purple-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-purple-700 transition duration-300 shadow-lg mt-4"
                                >
                                    {t.registerAsProvider}
                                </button>
                            )}
                        </div>
                    </div>
                    <Modal
                        show={modalShow}
                        title={t.loginFailed}
                        message={modalMessage}
                        onClose={() => setModalShow(false)}
                    />
                    <Footer />
                </div>
            );
        };

        // --- Register Screen (for Users) ---
        const RegisterScreen = ({ onRegisterSuccess, onBackToLogin }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            const [fullName, setFullName] = useState('');
            const [mobileNumber, setMobileNumber] = useState('');
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [modalShow, setModalShow] = useState(false);
            const [modalTitle, setModalTitle] = useState('');
            const [modalMessage, setModalMessage] = useState('');

            const handleRegister = () => {
                if (!fullName || !mobileNumber || !email || !password) {
                    setModalTitle(t.registrationFailed);
                    setModalMessage(t.pleaseFillAllFields);
                    setModalShow(true);
                    return;
                }
                // Simulate registration success
                // In a real app, send data to a backend (where you'd handle DB insertion)
                setModalTitle(t.registrationSuccessful);
                setModalMessage(t.welcomeToSmartPark);
                setModalShow(true);
                setTimeout(() => {
                    setModalShow(false);
                    onRegisterSuccess();
                }, 2000);
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md transform transition-all duration-300 scale-100 opacity-100">
                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.registerForSmartPark}</h2>
                        <input
                            type="text"
                            placeholder={t.fullName}
                            value={fullName}
                            onChange={(e) => setFullName(e.target.value)}
                            className="w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                        <input
                            type="tel"
                            placeholder={t.mobileNumber}
                            value={mobileNumber}
                            onChange={(e) => setMobileNumber(e.target.value)}
                            className="w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                        <input
                            type="email"
                            placeholder={t.email}
                            value={email}
                            onChange={(e) => setEmail(e.target.value)}
                            className="w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                        <input
                            type="password"
                            placeholder={t.password}
                            value={password}
                            onChange={(e) => setPassword(e.target.value)}
                            className="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                        <button
                            onClick={handleRegister}
                            className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                        >
                            {t.register}
                        </button>
                        <button
                            onClick={onBackToLogin}
                            className="w-full mt-4 text-blue-600 hover:underline font-semibold"
                        >
                            {t.backToLogin}
                        </button>
                    </div>
                    <Modal
                        show={modalShow}
                        title={modalTitle}
                        message={modalMessage}
                        onClose={() => setModalShow(false)}
                    />
                </div>
            );
        };

        // --- Provider Registration Screen ---
        const ProviderRegistrationScreen = ({ onRegisterSuccess, onBackToUserTypeSelection }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            const [fullName, setFullName] = useState('');
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [modalShow, setModalShow] = useState(false);
            const [modalTitle, setModalTitle] = useState('');
            const [modalMessage, setModalMessage] = useState('');

            const handleRegister = () => {
                if (!fullName || !email || !password) {
                    setModalTitle(t.registrationFailed);
                    setModalMessage(t.pleaseFillAllFields);
                    setModalShow(true);
                    return;
                }
                // Simulate provider registration
                alert("Provider registration successful for: " + email);
                setModalTitle(t.registrationSuccessful);
                setModalMessage("Provider registration successful!");
                setModalShow(true);
                setTimeout(() => {
                    setModalShow(false);
                    onRegisterSuccess();
                }, 2000);
            };

            return (
                <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md transform transition-all duration-300 scale-100 opacity-100">
                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.providerRegistration}</h2>
                        <input
                            type="text"
                            placeholder={t.fullName}
                            value={fullName}
                            onChange={(e) => setFullName(e.target.value)}
                            className="w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                        <input
                            type="email"
                            placeholder={t.email}
                            value={email}
                            onChange={(e) => setEmail(e.target.value)}
                            className="w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                        <input
                            type="password"
                            placeholder={t.password}
                            value={password}
                            onChange={(e) => setPassword(e.target.value)}
                            className="w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        />
                        <button
                            onClick={handleRegister}
                            className="w-full bg-purple-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-purple-700 transition duration-300 shadow-lg"
                        >
                            {t.registerAsProvider}
                        </button>
                        <button
                            onClick={onBackToUserTypeSelection}
                            className="w-full mt-4 text-purple-600 hover:underline font-semibold"
                        >
                            {t.backToUserTypeSelection}
                        </button>
                    </div>
                    <Modal
                        show={modalShow}
                        title={modalTitle}
                        message={modalMessage}
                        onClose={() => setModalShow(false)}
                    />
                </div>
            );
        };

        // --- About Us Screen ---
        const AboutUsScreen = ({ onBack }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            return (
                <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                    <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-2xl transform transition-all duration-300 scale-100 opacity-100">
                        <h2 className="text-4xl font-extrabold text-blue-800 mb-8 text-center">{t.aboutUs}</h2>
                        <p className="text-gray-700 whitespace-pre-line leading-relaxed mb-8">
                            {t.aboutUsContent}
                        </p>
                        <p className="text-gray-500 text-sm italic text-center mb-8">
                            {t.disclaimer}
                        </p>
                        <button
                            onClick={onBack}
                            className="w-full bg-gray-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-gray-600 transition duration-300 shadow-lg"
                        >
                            {t.backToUserTypeSelection} {/* Reusing this translation key for "Back" */}
                        </button>
                    </div>
                </div>
            );
        };

        // --- User Type Selection Screen ---
        const UserTypeSelectionScreen = ({ setUserType, onNavigate }) => {
            const { appLanguage } = useContext(LanguageContext);
            const t = translations[appLanguage];
            return (
                <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 to-indigo-200 p-4">
                    <Header onNavigate={onNavigate} showLogout={false} /> {/* Settings accessible from this screen */}
                    <div className="flex-grow flex flex-col items-center justify-center w-full max-w-4xl px-4 py-8">
                        <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md text-center transform transition-all duration-300 scale-100 opacity-100">
                            <h2 className="text-4xl font-extrabold text-blue-800 mb-8">{t.selectUserType}</h2>
                            <div className="space-y-6">
                                <button
                                    onClick={() => setUserType('customer')}
                                    className="w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg"
                                >
                                    {t.customerApp}
                                </button>
                                <button
                                    onClick={() => setUserType('provider')}
                                    className="w-full bg-purple-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-purple-700 transition duration-300 shadow-lg"
                                >
                                    {t.serviceProviderApp}
                                </button>
                            </div>
                        </div>
                    </div>
                    <Footer />
                </div>
            );
        };

        // --- Main App Component ---
        function App() {
            const [currentView, setCurrentView] = useState('userTypeSelection'); // 'userTypeSelection', 'customer', 'provider', 'login', 'register', 'forgotPassword', 'providerRegister', 'settings', 'aboutUs'
            const [appLanguage, setAppLanguage] = useState('en'); // Default language

            const handleLogout = () => {
                setCurrentView('userTypeSelection'); // Go back to user type selection
            };

            const handleLoginSuccess = (userType) => {
                setCurrentView(userType);
            };

            const handleRegistrationSuccess = () => {
                setCurrentView('login');
            };

            const handleNavigation = (view) => {
                setCurrentView(view);
            };

            const renderCurrentView = () => {
                switch (currentView) {
                    case 'userTypeSelection':
                        return <UserTypeSelectionScreen setUserType={(type) => {
                            if (type === 'customer' || type === 'provider') {
                                setCurrentView('login'); // Navigate to login screen for both user types
                            }
                        }} onNavigate={handleNavigation} />;
                    case 'login':
                        return <LoginScreen onLogin={handleLoginSuccess} onNavigate={handleNavigation} onRegisterAsProvider={() => setCurrentView('providerRegister')} />;
                    case 'register':
                        return <RegisterScreen onRegisterSuccess={handleRegistrationSuccess} onBackToLogin={() => setCurrentView('login')} />;
                    case 'providerRegister':
                        return <ProviderRegistrationScreen onRegisterSuccess={handleRegistrationSuccess} onBackToUserTypeSelection={() => setCurrentView('userTypeSelection')} />;
                    case 'customer':
                        return <CustomerApp onLogout={handleLogout} onBackToUserTypeSelection={handleLogout} />;
                    case 'provider':
                        return <ServiceProviderApp onLogout={handleLogout} onBackToUserTypeSelection={handleLogout} />;
                    case 'forgotPassword':
                        return <ForgotPasswordScreen onBackToLogin={() => setCurrentView('login')} />;
                    case 'settings':
                        return <SettingsScreen onBack={() => {
                            // Go back to the previous view before settings, or a default view
                            if (appLanguage === 'en' || appLanguage === 'hi') { // If coming from main app (customer/provider)
                                if (currentView === 'customer') setCurrentView('customer'); // Stay on customer app
                                else if (currentView === 'provider') setCurrentView('provider'); // Stay on provider app
                                else setCurrentView('userTypeSelection'); // Or go to user type selection
                            } else {
                                setCurrentView('userTypeSelection'); // Default back
                            }
                            // Simplified: Just go back to login selection for now or previous app if logged in
                            if (userType === 'customer') setCurrentView('customer'); // If customer was logged in, go back to customer app
                            else if (userType === 'provider') setCurrentView('provider'); // If provider was logged in, go back to provider app
                            else setCurrentView('userTypeSelection'); // Otherwise go to user type selection
                            
                            // A more robust solution would track the previous route.
                            setCurrentView(prevUserType || 'userTypeSelection'); // Assuming prevUserType is defined/passed
                            // Simpler: Just go back to user type selection after settings
                             setCurrentView('userTypeSelection');
                        }} setAppLanguage={setAppLanguage} />; // Pass setAppLanguage
                    default:
                        return <UserTypeSelectionScreen setUserType={(type) => {
                            if (type === 'customer' || type === 'provider') {
                                setCurrentView('login');
                            }
                        }} onNavigate={handleNavigation} />;
                }
            };

            // To make `SettingsScreen` navigate back to the previous app, we need to pass the current userType.
            // Let's refine `App` to store the last active "app" view (customer/provider)
            const [lastAppView, setLastAppView] = useState(null);

            useEffect(() => {
                if (currentView === 'customer' || currentView === 'provider') {
                    setLastAppView(currentView);
                }
            }, [currentView]);

            const handleSettingsBack = () => {
                // If there was a last app view, go back to it, otherwise go to user type selection
                setCurrentView(lastAppView || 'userTypeSelection');
            };

            return (
                <LanguageContext.Provider value={{ appLanguage, setAppLanguage }}>
                    {currentView === 'userTypeSelection' && <UserTypeSelectionScreen setUserType={(type) => {
                        if (type === 'customer' || type === 'provider') {
                            setCurrentView('login');
                        }
                    }} onNavigate={handleNavigation} />}
                    {currentView === 'login' && <LoginScreen onLogin={handleLoginSuccess} onNavigate={handleNavigation} onRegisterAsProvider={() => setCurrentView('providerRegister')} />}
                    {currentView === 'register' && <RegisterScreen onRegisterSuccess={handleRegistrationSuccess} onBackToLogin={() => setCurrentView('login')} />}
                    {currentView === 'providerRegister' && <ProviderRegistrationScreen onRegisterSuccess={handleRegistrationSuccess} onBackToUserTypeSelection={() => setCurrentView('userTypeSelection')} />}
                    {currentView === 'customer' && <CustomerApp onLogout={handleLogout} onBackToUserTypeSelection={handleLogout} />}
                    {currentView === 'provider' && <ServiceProviderApp onLogout={handleLogout} onBackToUserTypeSelection={handleLogout} />}
                    {currentView === 'forgotPassword' && <ForgotPasswordScreen onBackToLogin={() => setCurrentView('login')} />}
                    {currentView === 'settings' && <SettingsScreen onBack={handleSettingsBack} setAppLanguage={setAppLanguage} />}
                </LanguageContext.Provider>
            );
        }

        // Use createRoot for React 18
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
